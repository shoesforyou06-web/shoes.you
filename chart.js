!function(t){var e=navigator.userAgent.toLowerCase(),i=function(t){return t.test(e)},L=Object.prototype.toString,I=i(/opera/),M=i(/\bchrome\b/),H=i(/webkit/),F=!M&&i(/safari/),B=!I&&i(/msie/),X=!!document.createElement("canvas").getContext,Y=!H&&i(/gecko/),j=i(/ipod|ipad|iphone|android/gi),V={Linear:function(t,e,i,n){return i*t/n+e},Cubic:{easeIn:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOut:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}}},W=function(r){var s,l,e=!1,i=!1,n=[],o=document.addEventListener?function(){document.removeEventListener("DOMContentLoaded",o,!1),c()}:document.attachEvent?function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",o),c())}:void 0,a=function(){if(!e){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(a,1)}c()}},c=function(){if(!e){e=!0;for(var t=0;t<n.length;t++)n[t].call(document);n=[]}},u=function(t){!function(){if(!i){if(i=!0,"complete"===document.readyState)return setTimeout(c,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",o,!1),r.addEventListener("load",c,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",o),r.attachEvent("onload",c);var t=!1;try{t=null==r.frameElement}catch(t){}document.documentElement.doScroll&&t&&a()}}}(),e?t.call(document,h):n.push(function(){return t.call(this)})},h=function(t){return!t||t.nodeType?t:"string"==typeof t?(-1!=t.indexOf("#")&&(t=t.substring(1)),document.getElementById(t)):void("function"==typeof t&&u(t))};h.apply=function(t,e){if(t&&e&&"object"==typeof e)for(var i in e)void 0!==e[i]&&(t[i]=e[i]);if(e||!t)return t;var n={};for(var i in t)n[i]=t[i];return n},h.apply(h,{version:"1.0",email:"taylor@ichartjs.com",isEmpty:function(t,e){return null==t||h.isArray(t)&&!t.length||!e&&""===t},isArray:function(t){return"[object Array]"===L.apply(t)},isDate:function(t){return"[object Date]"===L.apply(t)},isObject:function(t){return!!t&&"[object Object]"===L.apply(t)},isFunction:function(t){return"[object Function]"===L.apply(t)},isNumber:function(t){return"number"==typeof t&&isFinite(t)},isString:function(t){return"string"==typeof t},isBoolean:function(t){return"boolean"==typeof t},isFalse:function(t){return"boolean"==typeof t&&!t},isElement:function(t){return!!t&&!!t.tagName},isDefined:function(t){return void 0!==t}}),h.applyIf=function(t,e){if(t&&h.isObject(e))for(var i in e)h.isDefined(e[i])&&!h.isDefined(t[i])&&(t[i]=e[i]);return!e&&t?h.apply(t):t},h.merge=function(t,e,i){if(t&&h.isObject(e)){for(var n in e)h.isDefined(e[n])&&(h.isObject(e[n])?h.isObject(t[n])?h.merge(t[n],e[n]):t[n]=h.clone(e[n],!0):t[n]=e[n]);if(h.isObject(i))return h.merge(t,i)}return t},h.clone=function(t,e,i){var n={};if(h.isArray(t)&&h.isObject(e))for(var o=0;o<t.length;o++)i&&h.isObject(e[t[o]])?n[t[o]]=h.clone(e[t[o]],i):n[t[o]]=e[t[o]];else if(h.isObject(t))for(var a in t)e&&h.isObject(t[a])&&!t[a].ICHARTJS_OBJECT?n[a]=h.clone(t[a],e):n[a]=t[a];return n},h.override=function(t,e){if(t&&e){var i=t.prototype;h.apply(i,e),h.isIE&&e.hasOwnProperty("toString")&&(i.toString=e.toString)}},h.extend=(s=function(t){for(var e in t)this[e]=t[e]},l=Object.prototype.constructor,function(t,e){var i,n=function(){t.apply(this,arguments)},o=function(){},a=t.prototype;return o.prototype=a,(((i=n.prototype=new o).constructor=n).superclass=a).constructor==l&&(a.constructor=t),n.override=function(t){h.override(n,t)},i.superclass=i.supr=function(){return a},i.override=s,h.override(n,e),n.extend=function(t){return h.extend(n,t)},n.plugin_={},n.plugin=function(t,e){h.isString(t)&&h.isFunction(e)&&(n.plugin_[t]=e)},n});var g,d=Math.sin,p=Math.cos,f=Math.atan,y=(Math.tan,Math.acos,Math.sqrt),x=Math.abs,b=Math.PI,_=2*b,v=Math.ceil,m=Math.round,w=Math.floor,T=Math.max,C=Math.min,A=parseFloat,D={},S={},k=function(t,e){if(0==t)return t;var i=x(t),n=.1;if(1<i){for(;1<i;)i/=10,n*=10;return w(t/n+e)*n}for(n=1;i<1;)i*=10,n*=10;return m(t*n+e)/n},E={white:"rgb(255,255,255)",green:"rgb(0,128,0)",gray:"rgb(80,80,80)",red:"rgb(255,0,0)",blue:"rgb(0,0,255)",yellow:"rgb(255,255,0)",black:"rgb(0,0,0)"},P=function(t){var e=/rgb\((\w*),(\w*),(\w*)\)/.exec(t);if(e)return new Array(e[1],e[2],e[3]);if(e=/rgba\((\w*),(\w*),(\w*),(.*)\)/.exec(t))return new Array(e[1],e[2],e[3],e[4]);throw new Error("invalid colors value '"+t+"'")},z=function(t){if(!t)return t;if(t=t.replace(/\s/g,"").toLowerCase(),/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.exec(t))return t;if(/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0(\.[0-9])?|1(\.0)?)\)$/.exec(t))return t;if(/^#(([a-fA-F0-9]{6,7})|([a-fA-F0-9]{3}))$/.exec(t))return(7==(e=(e=t).replace(/#/g,"").replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3")).length?"rgba(":"rgb(")+parseInt(e.substring(0,2),16)+","+parseInt(e.substring(2,4),16)+","+parseInt(e.substring(4,6),16)+(7==e.length?",0."+e.substring(6,7)+")":")");var e;if(E[t])return E[t];throw new Error("invalid colors value '"+t+"'")},R=function(t,e){return e=e||.14,.5<t?e-(1-t)/10:.1<t?e-.16+t/5:e<t?e:t/2},O=function(t,e,i,n){if(!e)return e;var o=function(t,e,i){h.isArray(t)&&(e=t[1],i=t[2],t=t[0]),i/=255;var n,o=T(T(t/=255,e/=255),i),a=o-C(C(t,e),i);return 0==a?new Array(0,0,o):(t==o?n=(e-i)/a:e==o?n=(i-t)/a+2:i==o&&(n=(t-e)/a+4),(n*=60)<0&&(n+=360),new Array(n,a/o,o))}(e=P(z(e)));return n=0!=n?n||.05:n,o[1]-=n,o[2]=t?(o[2]-=R(o[2],i),o[1]=h.upTo(o[1],1),h.lowTo(o[2],0)):(o[2]+=R(1-o[2],i),o[1]=h.lowTo(o[1],0),h.upTo(o[2],1)),function(t,e,i,n){h.isArray(t)&&(n=e,e=t[1],i=t[2],t=t[0]);var o,a,s,r=w(t/60)%6,l=t/60-r,c=i*(1-e),u=i*(1-e*l),g=i*(1-e*(1-l));switch(r){case 0:o=i,a=g,s=c;break;case 1:o=u,a=i,s=c;break;case 2:o=c,a=i,s=g;break;case 3:o=c,a=u,s=i;break;case 4:o=g,a=c,s=i;break;case 5:o=i,a=c,s=u}return"rgb"+(n?"a":"")+"("+m(255*o)+","+m(255*a)+","+m(255*s)+(n?","+n+")":")")}(o,e[3])};return h.apply(h,{getFont:function(t,e,i,n){return t+" "+e+(n||"px")+" "+i},getDoc:function(){return r.contentWindow?r.contentWindow.document:r.contentDocument?r.contentDocument:r.document},DefineAbstract:function(t,e){if(!e[t])throw new Error("Cannot instantiate the type '"+e.type+"'.you must implements it with method '"+t+"'.")},getAA:function(t){return"linear"==t?V.Linear:"easeInOut"==t||"easeIn"==t||"easeOut"==t?V.Cubic[t]:V.Linear},noConflict:function(){return W},plugin:function(t,e,i){h.isFunction(t)&&t.plugin(e,i)},parsePadding:function(t,e){return t=t||0,h.isNumber(t)?new Array(t,t,t,t):(h.isArray(t)||(e=e||0,1==(t=t.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g,/\s/).replace(/\s/g,",").split(",")).length?t[0]=t[1]=t[2]=t[3]=A(t[0])||e:2==t.length?(t[0]=t[2]=A(t[0])||e,t[1]=t[3]=A(t[1])||e):3==t.length?(t[0]=A(t[0])||e,t[1]=t[3]=A(t[1])||e,t[2]=A(t[2])||e):(t[0]=A(t[0])||e,t[1]=A(t[1])||e,t[2]=A(t[2])||e,t[3]=A(t[3])||e)),t)},distanceP2P:function(t,e,i,n){return y((i-t)*(i-t)+(n-e)*(n-e))},atan2Radian:function(t,e,i,n){if(t==i)return e<n?b/2:3*b/2;if(e==n)return t<i?0:b;var o=h.quadrant(t,e,i,n),a=f(x((e-n)/(t-i)));return o?(3==o?_:b)+(2==o?a:-a):a},angle2Radian:function(t){return t*b/180},radian2Angle:function(t){return 180*t/b},quadrant:function(t,e,i,n){return t<i?e<n?0:3:e<n?1:2},toPI2:function(t){for(;t<0;)t+=_;return t},visible:function(t,e,i){if(e<=t)return[];var n=h.quadrantd(t),o=h.quadrantd(e);if((2==n||3==n)&&(2==o||3==o)&&e-t<b)return[];if(t=h.toPI2(t),(e=h.toPI2(e))<=t&&(e+=_),b<t)t=_;else{if(_<e)return[{s:t,e:b,f:i},{s:_,e:e,f:i}];b<e&&(e=b)}return{s:t,e:e,f:i}},quadrantd:function(t){if(0==t)return 0;if(t%_==0)return 3;for(;t<0;)t+=_;return v(t%_*2/b)-1},upTo:function(t,e){return t<e?t:e},lowTo:function(t,e){return e<t?t:e},between:function(t,e,i){return e<t?h.between(e,t,i):e<i?e:i<t?t:i},inRange:function(t,e,i){return i<e&&t<i},angleInRange:function(t,e,i){return i=(i-=t)<0?i+_:i,(i%=_)<e-t},angleZInRange:function(t,e,i){return e<t?t<i||i<e:i<e&&t<i},inRangeClosed:function(t,e,i){return i<=e&&t<=i},inEllipse:function(t,e,i,n){return t*t/i/i+e*e/n/n<=1},p2Point:function(t,e,i,n){return{x:t+p(i)*n,y:e+d(i)*n}},toRgb:z,toRgba:function(t,e){var i=P(z(t));return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"},vectorP2P:function(t,e,i){return i||(e=h.angle2Radian(e),t=h.angle2Radian(t)),{x:(e=d(e))*d(t),y:e*p(t)}},uid:function(t){return(t||"ichartjs")+"_"+v(1e4*Math.random())+(new Date).getTime().toString().substring(4)},register:function(t){if(h.isString(t))S[t.toLowerCase()]=t;else{var e=t.get("id");if(!e||""==e){for(e=h.uid(t.type);D[e];)e=h.uid(t.type);t.push("id",e)}if(D[e])throw new Error("exist reduplicate id :"+e);t.id=e,D[e]=t}},create:function(t){if(!t.type||!S[t.type])throw new Error("TypeNotFoundException["+t.type+"]");return new h[S[t.type]](t)},get:function(t){return D[t]},isPercent:function(t){return h.isString(t)&&t.match(/(.*)%/)},parsePercent:function(t,e){return h.isString(t)&&(t=t.match(/(.*)%/))&&(t=e?w(A(t[1])*e/100):t[1]/100),!t||t<=0||e<t?e:t},parseFloat:function(t,e){if(!h.isNumber(t)&&(t=A(t),!h.isNumber(t)))throw new Error("["+e+"]="+t+"is not a valid number.");return t},ceil:function(t){return k(t,1)},floor:function(t,e){return k(t,-1)},_2D:"2d",_3D:"3d",light:function(t,e,i){return O(!1,t,e,i)},dark:function(t,e,i){return O(!0,t,e,i)},fixPixel:function(t){return h.isNumber(t)?t:A(t.replace("px",""))||0},toPixel:function(t){return h.isNumber(t)?t+"px":h.fixPixel(t)+"px"},emptyFn:function(){return!0},supportCanvas:X,isOpera:I,isWebKit:H,isChrome:M,isSafari:F,isIE:B,isGecko:Y,isMobile:j,touch:"ontouchend"in document,FRAME:j?30:60}),h.Assert={isTrue:function(t,e){if(!0!==t)throw new Error(e)}},h.requestAnimFrame=(g=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(t){r.setTimeout(t,1e3/60)},function(t){g(t)}),h.Event={addEvent:function(t,e,i,n){t.addEventListener?t.addEventListener(e,i,n):t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i},fix:function(t){void 0===t&&(t=r.event);var e={target:t.target,pageX:t.pageX,pageY:t.pageY,offsetX:t.offsetX,offsetY:t.offsetY,stopPropagation:!1,event:t};if(void 0===t.offsetX){if(t.target||(e.target=t.srcElement||document),t.targetTouches&&(e.pageX=t.targetTouches[0].pageX,e.pageY=t.targetTouches[0].pageY),null==e.pageX&&null!=t.clientX){var i=document.documentElement,n=document.body;e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)}for(var o=0,a=0,s=t.target;s!=document.body&&s;)o+=s.offsetLeft-(s.scrollLeft||0),a+=s.offsetTop,s=s.offsetParent;e.offsetX=e.pageX-o,e.offsetY=e.pageY-a}return e.x=e.offsetX,e.y=e.offsetY,t.stopPropagation||(t.stopPropagation=function(){r.event.cancelBubble=!0}),e}},h}(t);Array.prototype.each=function(t,e){for(var i,n=this.length,o=0;o<n&&("boolean"!=typeof(i=e?t.call(e,this[o],o):t(this[o],o))||i);o++);return this},Array.prototype.eachAll=function(i,n){this.each(function(t,e){return W.isArray(t)?t.eachAll(i,n):n?i.call(n,t,e):i(t,e)},n)},Array.prototype.sor=function(t){for(var e,i=this,n=i.length-1,o=0;o<n;o++)for(var a=n;o<a;a--)(t?!t(i[a],i[a-1]):i[a]<i[a-1])&&(e=i[a],i[a]=i[a-1],i[a-1]=e)},t.iChart=W,t.$||(t.$=t.iChart)}(window),function(S){S.Element=function(t){var e=this._();e.type="element",e.ICHARTJS_OBJECT=!0,S.DefineAbstract("configure",e),S.DefineAbstract("afterConfiguration",e),e.options={},e.set({border:{enable:!1,color:"#BCBCBC",style:"solid",width:1,radius:0},shadow:!1,shadow_color:"#666666",shadow_blur:4,shadow_offsetx:0,shadow_offsety:0}),e.W="width",e.H="height",e.O="top",e.B="bottom",e.L="left",e.R="right",e.C="center",e.X="originx",e.Y="originy",e.variable={},e.events={mouseup:[],touchstart:[],touchmove:[],touchend:[],mousedown:[],dblclick:[]},e.registerEvent("initialize"),e.initialization=!1,e.configure.apply(e,Array.prototype.slice.call(arguments,1)),e.default_=S.clone(e.options,!0),e.set(t),e.afterConfiguration(e)},S.Element.prototype={_:function(){return this},afterConfiguration:function(t){if(S.isObject(t.get("listeners")))for(var e in t.get("listeners"))t.on(e,t.get("listeners")[e]);t.initialize(),t.fireEvent(t,"initialize",[t])},registerEvent:function(){for(var t=0;t<arguments.length;t++)this.events[arguments[t]]=[]},fireString:function(t,e,i,n){var o=this.fireEvent(t,e,i);return S.isString(o)?o:!0!==o&&S.isDefined(o)?o.toString():n},fireEvent:function(t,e,i){var n=this.events[e].length;if(1==n)return this.events[e][0].apply(t,i);for(var o=!0,a=0;a<n;a++)this.events[e][a].apply(t,i)||(o=!1);return o},on:function(t,e){return S.isString(t)&&S.isArray(this.events[t])?this.events[t].push(e):S.isArray(t)&&t.each(function(t){this.on(t,e)},this),this},getPlugin:function(t){return this.constructor.plugin_[t]},set:function(t){S.isObject(t)&&S.merge(this.options,t)},pushIf:function(t,e){return S.isDefined(this.get(t))&&null!=this.get(t)?this.get(t):this.push(t,e)},push:function(t,e){for(var i=t.split("."),n=i.length-1,o=this.options,a=0;a<n;a++)o[i[a]]||(o[i[a]]={}),o=o[i[a]];return o[i[n]]=e},get:function(t){for(var e=t.split("."),i=this.options[e[0]],n=1;n<e.length;n++){if(!i)return null;i=i[e[n]]}return i}},S.Painter=S.extend(S.Element,{configure:function(){this.type="painter",this.dimension=S._2D,S.DefineAbstract("commonDraw",this),S.DefineAbstract("initialize",this),this.set({strokeStyle:"gray",padding:10,color:"black",offsetx:0,offsety:0,background_color:"#FEFEFE",color_factor:.15,style:"",border:{enable:!0},gradient:!1,gradient_mode:"LinearGradientUpDown",z_index:0,listeners:null,originx:null,originy:null}),this.variable.event={mouseover:!1},this.variable.animation={},this.registerEvent("click","mousemove","mouseover","mouseout","beforedraw","draw")},is3D:function(){return this.dimension==S._3D},applyGradient:function(t,e,i,n){var o=this._();o.get("gradient")&&o.get("f_color")&&(o.push("f_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("dark_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("light_color",o.T.gradient(t||o.x||0,e||o.y||0,i||o.get(o.W),n||o.get(o.H),[o.get("background_color"),o.get("light_color")],o.get("gradient_mode"))),o.push("f_color_",o.get("f_color")))},draw:function(t,e){if(e)this.root.draw(t);else{if(!this.fireEvent(this,"beforedraw",[this,t]))return this;this.commonDraw(this,t),this.fireEvent(this,"draw",[this,t])}},inject:function(t){t&&(this.root=t,this.target=this.T=t.T)},doConfig:function(){var t=this._(),e=S.parsePadding(t.get("padding")),i=(i=t.get("border.enable"))?S.parsePadding(t.get("border.width")):[0,0,0,0],n=S.toRgb(t.get("background_color")),o=t.get("color_factor"),a=t.get("gradient")?0:null;if(t.set({border_top:i[0],border_right:i[1],border_bottom:i[2],border_left:i[3],hborder:i[1]+i[3],vborder:i[0]+i[2],padding_top:e[0]+i[0],padding_right:e[1]+i[1],padding_bottom:e[2]+i[2],padding_left:e[3]+i[3],hpadding:e[1]+e[3]+i[1]+i[3],vpadding:e[0]+e[2]+i[0]+i[2]}),!0===t.get("shadow")&&t.push("shadow",{color:t.get("shadow_color"),blur:t.get("shadow_blur"),offsetx:t.get("shadow_offsetx"),offsety:t.get("shadow_offsety")}),t.push("f_color",n),t.push("f_color_",n),t.push("light_color",S.light(n,o,a)),t.push("dark_color",S.dark(n,.8*o,a)),t.push("light_color2",S.light(n,2*o,a)),t.is3D()&&!t.get("xAngle_")){var s=S.vectorP2P(t.get("xAngle"),t.get("yAngle"));t.push("xAngle_",s.x),t.push("yAngle_",s.y)}}}),S.Html=S.extend(S.Element,{configure:function(t){this.type="html",this.T=t,S.DefineAbstract("beforeshow",this),this.set({animation:!0,default_action:!0,width:0,height:0,style:"",index:999,offset_top:0,offset_left:0}),this.transitions=""},initialize:function(){var t=this._();t.wrap=t.get("wrap"),t.dom=document.createElement("div"),t.get("shadow")&&t.css("boxShadow",t.get("shadow_offsetx")+"px "+t.get("shadow_offsety")+"px "+t.get("shadow_blur")+"px "+t.get("shadow_color")),t.get("border.enable")&&(t.css("border",t.get("border.width")+"px "+t.get("border.style")+" "+t.get("border.color")),t.css("borderRadius",t.get("border.radius")+"px")),t.css("position","absolute"),t.css("zIndex",t.get("index")),t.applyStyle(),t.wrap.appendChild(t.dom),t.style=t.dom.style,t.get("default_action")&&t.doAction(t)},width:function(){return this.dom.offsetWidth},height:function(){return this.dom?this.dom.offsetHeight:0},onTransitionEnd:function(t,e){var i="transitionend";S.isWebKit?i="webkitTransitionEnd":S.isOpera&&(i="oTransitionEnd"),S.Event.addEvent(this.dom,i,t,e)},destroy:function(){this.wrap.removeChild(this.dom),this.dom=null},transition:function(t){this.transitions=""==this.transitions?t:this.transitions+","+t,S.isWebKit?this.css("WebkitTransition",this.transitions):S.isGecko?this.css("MozTransition",this.transitions):S.isOpera?this.css("OTransition",this.transitions):this.css("transition",this.transitions)},beforeshow:function(t,e,i){i.follow(t,e,i)},show:function(t,e){this.beforeshow(t,e,this),this.css("visibility","visible"),this.get("animation")&&this.css("opacity",1)},hidden:function(t){this.css("visibility","hidden")},getDom:function(){return this.dom},css:function(t,e){if(S.isString(t)){if(!S.isDefined(e))return this.dom.style[t];this.dom.style[t]=e}},applyStyle:function(){for(var t,e=this.get("style").split(";"),i=0;i<e.length;i++)1<(t=e[i].split(":")).length&&this.css(t[0],t[1])}}),S.Component=S.extend(S.Painter,{configure:function(t){S.Component.superclass.configure.apply(this,arguments),this.type="component",this.set({fontsize:12,font:"Verdana",fontweight:"normal",fontunit:"px",tip:{enable:!1,border:{width:2}}}),this.atomic=!1,this.proxy=!1,this.ICHARTJS_CHART=!1,this.inject(t)},initialize:function(){S.DefineAbstract("isEventValid",this),S.DefineAbstract("doDraw",this),this.doConfig(),this.initialization=!0},getDimension:function(){return{x:this.x,y:this.y,width:this.get("width"),height:this.get("height")}},destroy:function(){this.tip&&this.tip.destroy()},doConfig:function(){S.Component.superclass.doConfig.call(this);var t=this._(),e=t.get(t.W),i=t.get("maxwidth"),n=t.get(t.X);if(e&&i&&(i<(e=t.push(t.W,S.parsePercent(e,i)))&&(e=t.push("width",i)),e<i)){var o=t.get("align")||t.C;o==t.C?n+=(i-e)/2:o==t.R&&(n+=i-e)}t.x=t.push(t.X,n+t.get("offsetx")),t.y=t.push(t.Y,t.get(t.Y)+t.get("offsety")),t.push("fontStyle",S.getFont(t.get("fontweight"),t.get("fontsize"),t.get("font"),t.get("fontunit"))),t.data=t.get("data"),t.get("tip.enable")&&(t.pushIf("tip.border.color",t.get("f_color")),S.isFunction(t.get("tip.invokeOffset"))||t.push("tip.invokeOffset",t.tipInvoke()))},isMouseOver:function(t){return this.isEventValid(t,this)},redraw:function(t){this.root.draw(t,this.root.Combination)},last:S.emptyFn,commonDraw:function(t){t.proxy||t.doDraw.call(t,t)}}),S.Tip=S.extend(S.Html,{configure:function(){S.Tip.superclass.configure.apply(this,arguments),this.type="tip",this.set({name:"",index:0,value:"",text:"",showType:"follow",invokeOffset:null,fade_duration:300,move_duration:100,timing_function:"ease-out",invokeOffsetDynamic:!1,style:"textAlign:left;padding:4px 5px;cursor:pointer;backgroundColor:rgba(239,239,239,.85);fontSize:12px;color:black;",border:{enable:!0,radius:5},delay:200}),this.registerEvent("parseText")},position:function(t,e,i){i.style.top=(t<0?0:t)+"px",i.style.left=(e<0?0:e)+"px"},follow:function(t,e,i){if(i.get("invokeOffsetDynamic")){if(e.hit){(S.isString(e.text)||S.isNumber(e.text))&&i.text(e.name,e.value,e.text,e.i,i);var n=i.get("invokeOffset")(i.width(),i.height(),e);i.position(n.top,n.left,i)}}else if("follow"!=i.get("showType")&&S.isFunction(i.get("invokeOffset"))){n=i.get("invokeOffset")(i.width(),i.height(),e);i.position(n.top,n.left,i)}else i.position(t.y-1.1*i.height()-2,t.x+2,i)},text:function(t,e,i,n,o){o.dom.innerHTML=o.fireString(o,"parseText",[o,t,e,i,n],i)},hidden:function(t){this.get("animation")?this.css("opacity",0):this.css("visibility","hidden")},doAction:function(n){n.T.on("mouseover",function(t,e,i){n.show(e,i)}).on("mouseout",function(t,e,i){n.hidden(e)}),"follow"==n.get("showType")&&n.T.on("mousemove",function(t,e,i){n.T.variable.event.mouseover&&setTimeout(function(){n.T.variable.event.mouseover&&n.follow(e,i,n)},n.get("delay"))})},initialize:function(){S.Tip.superclass.initialize.call(this);var e=this._();if(e.text(e.get("name"),e.get("value"),e.get("text"),e.get("index"),e),e.hidden(),e.get("animation")){var t=e.get("move_duration")/1e3+"s "+e.get("timing_function")+" 0s";e.transition("opacity "+e.get("fade_duration")/1e3+"s "+e.get("timing_function")+" 0s"),e.transition("top "+t),e.transition("left "+t),e.onTransitionEnd(function(t){0==e.css("opacity")&&e.css("visibility","hidden")},!1)}}}),S.CrossHair=S.extend(S.Html,{configure:function(){S.CrossHair.superclass.configure.apply(this,arguments),this.type="crosshair",this.set({top:0,left:0,hcross:!0,vcross:!0,invokeOffset:null,line_width:1,line_color:"#1A1A1A",delay:200})},follow:function(t,e,i){if(i.get("invokeOffset")){var n=i.get("invokeOffset")(t,e);n&&n.hit?(i.o_valid=!0,i.position(n.top-i.top,n.left-i.left,i)):n&&i.o_valid||i.position(i.owidth,i.oheight,i)}else i.position(t.y-i.top-1,t.x-i.left-1,i)},position:function(t,e,i){i.horizontal.style.top=t-i.size+"px",i.vertical.style.left=e-i.size+"px"},doCreate:function(t,e,i){var n=document.createElement("div");return n.style.width=S.toPixel(e),n.style.height=S.toPixel(i),n.style.backgroundColor=t.get("line_color"),n.style.position="absolute",t.dom.appendChild(n),n},doAction:function(n){n.T.on("mouseover",function(t,e,i){n.show(e,i)}).on("mouseout",function(t,e,i){n.hidden(e,i)}).on("mousemove",function(t,e,i){n.follow(e,i,n)})},initialize:function(){S.CrossHair.superclass.initialize.call(this);var t=this._(),e=S.toPixel(t.get("line_width"));t.size=t.get("line_width")/2,t.top=S.fixPixel(t.get(t.O)),t.left=S.fixPixel(t.get(t.L)),t.owidth=-t.T.root.width,t.oheight=-t.T.root.height,t.o_valid=!1,t.css("width","0px"),t.css("height","0px"),t.css("top",t.top+"px"),t.css("left",t.left+"px"),t.css("visibility","hidden"),t.horizontal=t.doCreate(t,t.get("hcross")?S.toPixel(t.get(t.W)):"0px",e),t.vertical=t.doCreate(t,e,t.get("vcross")?S.toPixel(t.get(t.H)):"0px")}}),S.Legend=S.extend(S.Component,{configure:function(){S.Legend.superclass.configure.apply(this,arguments),this.type="legend",this.set({data:void 0,width:"auto",column:1,row:"max",maxwidth:0,line_height:16,sign:"square",sign_size:10,sign_space:5,legend_space:5,z_index:1009,text_with_sign_color:!1,align:"right",valign:"middle"}),this.atomic=!0,this.registerEvent("parse")},isEventValid:function(i,n){var o={valid:!1};return i.x>this.x&&i.x<n.x+n.width&&i.y>n.y&&i.y<n.y+n.height&&n.data.each(function(t,e){if(i.x>t.x&&i.x<t.x+t.width_+n.get("signwidth")&&i.y>t.y&&i.y<t.y+n.get("line_height"))return!(o={valid:!0,index:e,target:t})},n),o},drawCell:function(t,e,i,n,o,a){var s=a.get("sign_size"),r=a.getPlugin("sign");r&&r.call(a,a.T,o,{x:t+s/2,y:e},s,n)||(-1!=o.indexOf("bar")&&a.T.box(t,e-s/12,s,s/6,0,n),"round"==o?a.T.round(t+s/2,e,s/2,n):"round-bar"==o?a.T.round(t+s/2,e,s/4,n):"square-bar"==o?a.T.box(t+s/4,e-s/4,s/2,s/2,0,n):"square"==o&&a.T.box(t,e-s/2,s,s,0,n)),a.T.fillText(i,t+a.get("signwidth"),e,0,a.get("text_with_sign_color")?n:a.get("color"),"lr",a.get("line_height"))},doDraw:function(e){e.T.box(e.x,e.y,e.width,e.height,e.get("border"),e.get("f_color"),!1,e.get("shadow")),e.T.textStyle(e.L,"middle",S.getFont(e.get("fontweight"),e.get("fontsize"),e.get("font"))),e.data.each(function(t){e.drawCell(t.x,t.y,t.text,t.color,t.sign,e)})},doLayout:function(e,t){var i,n,o,a,s=e.get("sign_size"),r=0,l=0,c=0,u=e.get("column"),g=e.get("row"),h=e.data.length;e.T.textFont(e.get("fontStyle")),e.get("line_height")<s&&e.push("line_height",s+s/5),e.push("signwidth",s+e.get("sign_space")),e.data.each(function(t){t.width_=e.T.measureText(t.text)},e);for(var d=0;d<u;d++){c=0;for(var p=d;p<h;p+=u)c=Math.max(c,e.data[p].width_);r+=e.columnwidth[d]=c}for(d=0;d<g;d++){c=0;for(p=d*u;p<h;p++)c=Math.max(c,e.data[p].text.split("\n").length);l+=e.columnheight[d]=c}if((r=e.push(e.W,r+e.get("hpadding")+e.get("signwidth")*u+(u-1)*e.get("legend_space")))>e.get("maxwidth")){var f=Math.floor(e.get("fontsize")*(e.get("maxwidth")/r));if(!(f<10&&1==u))return 9<f?e.push("fontStyle",S.getFont(e.get("fontweight"),e.push("fontsize",f),e.get("font"))):1<u&&e.push("row",Math.ceil(h/e.push("column",u-1))),void e.doLayout(e,t)}e.width=r,e.height=l=e.push(e.H,l*e.get("line_height")+e.get("vpadding")),e.get("valign")==e.O?e.y=t.get("t_originy"):e.get("valign")==e.B?e.y=t.get("b_originy")-l:e.y=t.get("centery")-l/2,e.get("align")==e.L?e.x=t.get("l_originx"):e.get("align")==e.C?e.x=t.get("centerx")-r/2:e.x=t.get("r_originx")-r,e.x=e.push(e.X,(e.x<0?t.get("l_originx"):e.x)+e.get("offsetx")),e.y=e.push(e.Y,(e.y<0?t.get("t_originy"):e.y)+e.get("offsety")),o=e.y+e.get("padding_top"),s=e.get("legend_space")+e.get("signwidth");for(d=0;d<g;d++){n=e.x+e.get("padding_left"),o+=a=e.columnheight[d]/2*e.get("line_height");for(p=0;p<u&&d*u+p<h;p++)(i=e.data[d*u+p]).y=o,i.x=n,n+=e.columnwidth[p]+s;o+=a}},doConfig:function(){S.Legend.superclass.doConfig.call(this);var i=this._(),t=i.root,e=S.isNumber(i.get("column")),n=S.isNumber(i.get("row")),o=i.data.length;i.get("align")==i.C&&"middle"==i.get("valign")&&i.push("valign",i.O),t.get("align")==i.L&&"middle"==i.get("valign")&&i.push("align",i.R),i.data.each(function(t,e){S.merge(t,i.fireEvent(i,"parse",[i,t.name,e])),t.text=t.text||t.name||"",t.sign=t.sign||i.get("sign")},i),e||n||(e=i.push("column",1)),e&&!n&&(n=i.push("row",Math.ceil(o/i.get("column")))),!e&&n&&(e=i.push("column",Math.ceil(o/i.get("row")))),e=i.get("column"),(n=i.get("row"))*e<o&&(n+=Math.ceil((o-n*e)/e),n=i.push("row",n)),i.columnwidth=[],i.columnheight=[],i.doLayout(i,t)}}),S.Label=S.extend(S.Component,{configure:function(){S.Label.superclass.configure.apply(this,arguments),this.type="label",this.set({text:"",line_height:12,line_thickness:1,sign:"square",sign_size:12,padding:"2 5",offsety:2,sign_space:5,background_color:"#efefef",text_with_sign_color:!1}),this.atomic=!0,this.registerEvent()},isEventValid:function(t,e){return{valid:S.inRange(e.labelx,e.labelx+e.get(e.W),t.x)&&S.inRange(e.labely,e.labely+e.get(e.H),t.y)}},text:function(t){t&&this.push("text",t),this.push(this.W,this.T.measureText(this.get("text"))+this.get("hpadding")+this.get("sign_size")+this.get("sign_space"))},localizer:function(t){var e=t.get("quadrantd"),i=t.get("line_points"),n=t.get("smooth"),o=(e=1<=e&&e<=2,t.get("labelx")),a=t.get("labely");t.labelx=o+(e?-t.get(t.W)-n:n),t.labely=a-t.get(t.H)/2,i[2]={x:o,y:a},i[3]={x:i[2].x+(e?-n:n),y:i[2].y}},doLayout:function(i,n,t,e){e.push("labelx",e.get("labelx")+i/t),e.push("labely",e.get("labely")+n/t),e.get("line_points").each(function(t,e){return t.x+=i,t.y+=n,1==e},e),e.localizer(e)},doDraw:function(t){var e=t.get("line_points"),i=t.get("sign_size"),n=t.labelx+t.get("padding_left"),o=t.labely+t.get("padding_top");t.T.label(e,t.get("line_thickness"),t.get("border.color")),t.T.box(t.labelx,t.labely,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),!1,t.get("shadow")),t.T.textStyle(t.L,t.O,t.get("fontStyle"));var a=t.get("color");t.get("text_with_sign_color")&&(a=t.get("scolor"));var s=(t.get(t.H)-i)/2;"square"==t.get("sign")?t.T.box(n,o,i,i,0,t.get("scolor")):t.get("sign")&&t.T.round(n+i/2,o+i/2,i/2,t.get("scolor")),t.T.fillText(t.get("text"),n+i+t.get("sign_space"),o-s,t.get("textwidth"),a)},doConfig:function(){S.Label.superclass.doConfig.call(this);var t=this._();t.T.textFont(t.get("fontStyle")),t.get("fontsize")>t.get("line_height")&&t.push("line_height",t.get("fontsize")),t.get("sign")||(t.push("sign_size",0),t.push("sign_space",0)),t.push(t.H,t.get("line_height")+t.get("vpadding")),t.text(),t.localizer(t)}}),S.Text=S.extend(S.Component,{configure:function(){S.Text.superclass.configure.apply(this,arguments),this.type="text",this.set({text:"",textAlign:"center",align:"center",background_color:0,textBaseline:"top",border:{enable:!1},width:0,height:0,padding:0,writingmode:"lr",line_height:16,rotate:0}),this.registerEvent()},doDraw:function(t){t.get("box_feature")&&t.T.box(t.x,t.y,t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color")),t.T.text(t.get("text"),t.get("textx"),t.get("texty"),t.get(t.W)-t.get("hpadding"),t.get("color"),t.get("textAlign"),t.get("textBaseline"),t.get("fontStyle"),t.get("writingmode"),t.get("line_height"),t.get("shadow"),t.get("rotate"))},isEventValid:function(){return{valid:!1}},doLayout:function(t,e,i,n){n.x=n.push(n.X,n.x+t),n.y=n.push(n.Y,n.y+e),n.push("textx",n.get("textx")+t),n.push("texty",n.get("texty")+e)},doConfig:function(){S.Text.superclass.doConfig.call(this);var t=this._(),e=t.x,i=t.y+t.get("padding_top"),n=t.get(t.W),o=t.get(t.H),a=t.get("textAlign");e+=a==t.C?n/2:a==t.R?n-t.get("padding_right"):t.get("padding_left"),o&&(i+=o/2,t.push("textBaseline","middle")),t.push("textx",e),t.push("texty",i),t.push("box_feature",n&&o),t.applyGradient()}}),function(y){var p,g,f,t,d=Math.PI,x=d/90,u=x/2,b=Math.ceil,_=Math.floor,v=2*d,m=Math.max,w=Math.min,T=Math.sin,C=Math.cos,A=function(t,e){return 1==t?_(e)+.5:Math.round(e)},h=function(t,e,i,n){var o,a,s,r,l=e.x,c=e.y,u=t[i-1],g=t[i+1];if(i<t.length-1){var h,d=u.y,p=g.y;o=(n*l+u.x)/(n+1),r=(n*c+p)/(n+1),r+=h=(r-(a=(n*c+d)/(n+1)))*((s=(n*l+g.x)/(n+1))-l)/(s-o)+c-r,d<(a+=h)&&c<a?r=2*c-(a=m(d,c)):a<d&&a<c&&(r=2*c-(a=w(d,c))),p<r&&c<r?a=2*c-(r=m(p,c)):r<p&&r<c&&(a=2*c-(r=w(p,c))),e.rcx=s,e.rcy=r}return[u.rcx||u.x,u.rcy||u.y,o||l,a||c,l,c]},D=function(t){return y.isNumber(t)?t:y.parseFloat(t,t)};function s(t){if("string"==typeof t&&(t=y(t)),!t||!t.tagName||"canvas"!=t.tagName.toLowerCase())throw new Error("there not a canvas element");this.canvas=t,this.c=this.canvas.getContext("2d")}s.prototype={getContext:function(){return this.c},css:function(t,e){if(!y.isDefined(e))return this.canvas.style[t];this.canvas.style[t]=e},ellipse:function(t,e,i,n,o,a,s,r,l,c,u,g,h,d){var p=o;h=!!h;for(this.save().gCo(d).strokeStyle(r,l,c).shadowOn(u).fillStyle(s).moveTo(t,e).beginPath(),h&&this.moveTo(t,e);p<=a;)this.lineTo(t+i*C(p),e+n*T(p)),p+=x;return this.lineTo(t+i*C(a),e+n*T(a)).closePath().stroke(r).fill(s).restore()},arc:function(t,e,i,n,o,a,s,r,l,c,u,g,h,d){if(r&&(i-=_(l/2)),i<=0)return this;this.save().gCo(d).strokeStyle(r,l,c).fillStyle(s).beginPath();var p=this.c.createRadialGradient(t,e,0,t,e,i);return p.addColorStop(0,y.toRgba(y.light(s,.3,0),1)),p.addColorStop(1,y.toRgba(y.light(s,.4,.3),1)),this.c.strokeStyle=s,this.c.fillStyle=p,n?(this.moveTo(t+C(o)*(i-n),e+T(o)*(i-n)).lineTo(t+C(o)*i,e+T(o)*i),this.c.arc(t,e,i,o,a,g),this.lineTo(t+C(a)*(i-n),e+T(a)*(i-n)),this.c.arc(t,e,i-n,a,o,!g)):(this.c.arc(t,e,i,o,a,g),h&&this.lineTo(t,e)),this.closePath(),r?this.shadowOn(u).stroke(r).shadowOff().fill(s):(this.c.stroke(s),this.shadowOn(u).fill(s)),this.restore()},sector:function(t,e,i,n,o,a,s,r,l,c,u,g,h,d){return u&&this.arc(t,e,i,n,o,a,s,r,l,c,u,g,!h,!d),this.arc(t,e,i,n,o,a,s,r,l,c,!1,g,!h)},sector3D:(p=function(i,n,o,a,t,e,s,r,l){var c=function(t,e){this.lineTo(i+o*C(t),n+(e||0)+a*T(t))},u=t;for(this.fillStyle(y.dark(l)).moveTo(i+o*C(t),n+a*T(t)).beginPath();u<=e;)c.call(this,u),u+=x;for(c.call(this,e),this.lineTo(i+o*C(e),n+r+a*T(e)),u=e;t<=u;)c.call(this,u,r),u-=x;c.call(this,t,r),this.lineTo(i+o*C(t),n+a*T(t)).closePath().fill(!0)},g=function(t,e,i,n,o,a,s,r){var l=t+i*C(s),c=e+a+n*T(s);this.moveTo(t,e).beginPath().fillStyle(r).lineTo(t,e+a).lineTo(l,c).lineTo(l,c-a).lineTo(t,e).closePath().fill(!0)},f=function(t,e,i,n,o,a,s,r,l){var c=y.quadrantd(o),u=y.quadrantd(a);l=y.dark(l),1!=c&&2!=c||g.call(this,t,e,i,n,s,r,o,l),0!=u&&3!=u||g.call(this,t,e,i,n,s,r,a,l)},t=function(t,e,i,n,o,a,s,r,l,c,u,g,h,d){return this.ellipse(t,e+s,i,n,o,a,r,l,c,u,g,h,!0),f.call(this,t,e,i,n,o,a,h,s,r),this.ellipse(t,e,i,n,o,a,r,l,c,u,!1,h,!0),p.call(this,t,e,i,n,o,a,h,s,r),this},t.layerPaint=f,t.sPaint=p,t.layerDraw=g,t),textStyle:function(t,e,i){return this.textAlign(t).textBaseline(e).textFont(i)},strokeStyle:function(t,e,i,n){return t&&(e&&(this.c.lineWidth=e),i&&(this.c.strokeStyle=i),n&&(this.c.lineJoin=n)),this},globalAlpha:function(t){return t&&(this.c.globalAlpha=t),this},fillStyle:function(t){return t&&(this.c.fillStyle=t),this},arc2:function(t,e,i,n,o,a){return i&&this.c.arc(t,e,i,n,o,a),this},textAlign:function(t){return t&&(this.c.textAlign=t),this},textBaseline:function(t){return t&&(this.c.textBaseline=t),this},textFont:function(t){return t&&(this.c.font=t),this},shadowOn:function(t){return t&&(this.c.shadowColor=t.color,this.c.shadowBlur=t.blur,this.c.shadowOffsetX=t.offsetx,this.c.shadowOffsetY=t.offsety),this},shadowOff:function(){return this.c.shadowColor="white",this.c.shadowBlur=this.c.shadowOffsetX=this.c.shadowOffsetY=0,this},gradient:function(t,e,i,n,o,a,s){var r=t,l=e,c=!(a=a.toLowerCase()).indexOf("linear");if(a=a.substring(14),c){switch(a){case"updown":l+=n;break;case"downup":e+=n;break;case"leftright":r+=i;break;case"rightleft":t+=i;break;default:return o[0]}return this.avgLinearGradient(t,e,r,l,o)}return t+=i/2,e+=n/2,this.avgRadialGradient(t,e,s||0,t,e,n<i?n:i,"outin"==a?o.reverse():o)},avgLinearGradient:function(t,e,i,n,o){for(var a=this.createLinearGradient(t,e,i,n),s=0;s<o.length;s++)a.addColorStop(s/(o.length-1),o[s]);return a},createLinearGradient:function(t,e,i,n){return this.c.createLinearGradient(t,e,i,n)},avgRadialGradient:function(t,e,i,n,o,a,s){for(var r=this.createRadialGradient(t,e,i,n,o,a),l=0;l<s.length;l++)r.addColorStop(l/(s.length-1),s[l]);return r},createRadialGradient:function(t,e,i,n,o,a){return this.c.createRadialGradient(t,e,i,n,o,a)},text:function(t,e,i,n,o,a,s,r,l,c,u,g){return this.save().textStyle(a,s,r).fillText(t,e,i,n,o,l,c,u,g).restore()},fillText:function(t,i,n,o,e,a,s,r,l){if(!(t=t.toString())||!t.length)return this;o=o||!1,a=a||"lr",s=s||16,i=A(0,i),n=A(0,n);var c=t.split("tb"==a?"":"\n");return 1<c.length&&("middle"==this.c.textBaseline?n-=(c.length-1)*s/2:"bottom"==this.c.textBaseline&&(n-=(c.length-1)*s)),this.save().fillStyle(e).translate(i,n).rotate(u*l).shadowOn(r),c.each(function(e,t){try{o&&0<o?this.c.fillText(e,0,t*s,o):this.c.fillText(e,0,t*s)}catch(t){console.log(t.message+"["+e+","+i+","+n+"]")}},this),this.restore()},measureText:function(t){t=t.split("\n");var e=0;return t.each(function(t){e=m(this.measureText(t).width,e)},this.c),e},moveTo:function(t,e){return t=t||0,e=e||0,this.c.moveTo(t,e),this},lineTo:function(t,e){return t=t||0,e=e||0,this.c.lineTo(t,e),this},save:function(){return this.c.save(),this},restore:function(){return this.c.restore(),this},beginPath:function(){return this.c.beginPath(),this},closePath:function(){return this.c.closePath(),this},stroke:function(t){return t&&this.c.stroke(),this},fill:function(t){return t&&this.c.fill(),this},cube:function(t,e,i,n,o,a,s,r,l,c,u,g){var h=(t=A(c,t))+(s=s&&0<s?s:o)*i,d=(e=A(c,e))-s*n;if(h=A(c,h),d=A(c,d),g){var p;(p=this.createLinearGradient(t,e,t,d)).addColorStop(0,y.toRgba(y.dark(r,.1,.1),.8)),p.addColorStop(1,y.toRgba(y.light(r,1,.3),.8)),this.polygon(p,l,c,u,g,!1,[{x:t,y:e},{x:h,y:d},{x:h+o,y:d},{x:t+o,y:e}]),(p=this.createLinearGradient(t,e,t,e+a)).addColorStop(0,y.toRgba(y.light(r,5,.2),.8)),p.addColorStop(.8,y.toRgba(r,.8)),p.addColorStop(1,y.toRgba(r,.8)),this.polygon(p,l,c,u,g,!1,[{x:t,y:e},{x:t,y:e+a},{x:t+o,y:e+a},{x:t+o,y:e}]),(p=this.createLinearGradient(0,0,300,300)).addColorStop(0,y.toRgba(y.light(r,1),.8)),p.addColorStop(1,y.toRgba(y.dark(r,.5),.8)),this.polygon(p,l,c,u,g,!1,[{x:t+o,y:e},{x:h+o,y:d},{x:h+o,y:d+a},{x:t+o,y:e+a}])}return this},cube3D:function(t,e,i,n,o,a,s,r,l,c,u,g){if(t=A(c,t),e=A(c,e),r=r&&0!=r?r:a,o){var h=y.vectorP2P(i,n);i=t+r*h.x,n=e-r*h.y}else i=t+r*i,n=e-r*n;for(;g.length<6;)g.push(!1);i=A(c,i);var d=[];return(n=A(c,n))<0?y.isObject(g[4])&&d.push(y.applyIf({points:[{x:t,y:e-s},{x:i,y:n-s},{x:i+a,y:n-s},{x:t+a,y:e-s}]},g[4])):y.isObject(g[0])&&d.push(y.applyIf({points:[{x:t,y:e},{x:i,y:n},{x:i+a,y:n},{x:t+a,y:e}]},g[0])),y.isObject(g[1])&&d.push(y.applyIf({points:[{x:i,y:n},{x:i,y:n-s},{x:i+a,y:n-s},{x:i+a,y:n}]},g[1])),y.isObject(g[2])&&d.push(y.applyIf({points:[{x:t,y:e},{x:t,y:e-s},{x:i,y:n-s},{x:i,y:n}]},g[2])),y.isObject(g[3])&&d.push(y.applyIf({points:[{x:t+a,y:e},{x:t+a,y:e-s},{x:i+a,y:n-s},{x:i+a,y:n}]},g[3])),n<0?y.isObject(g[0])&&d.push(y.applyIf({points:[{x:t,y:e},{x:i,y:n},{x:i+a,y:n},{x:t+a,y:e}]},g[0])):y.isObject(g[4])&&d.push(y.applyIf({points:[{x:t,y:e-s},{x:i,y:n-s},{x:i+a,y:n-s},{x:t+a,y:e-s}]},g[4])),y.isObject(g[5])&&d.push(y.applyIf({points:[{x:t,y:e},{x:t,y:e-s},{x:t+a,y:e-s},{x:t+a,y:e}]},g[5])),d.each(function(t){this.polygon(t.color,l,c,u,t.shadow,t.alpha,t.points)},this),this},polygon:function(t,e,i,n,o,a,s,r,l,c){if(this.save().strokeStyle(e,i,n).beginPath().fillStyle(t).globalAlpha(a).shadowOn(o).moveTo(s[0].x,s[0].y),r){this.moveTo(A(i,c[0].x),A(i,c[0].y)).lineTo(A(i,s[0].x),A(i,s[0].y));for(var u=1;u<s.length;u++)this.bezierCurveTo(h(s,s[u],u,l));this.lineTo(A(i,c[1].x),A(i,c[1].y))}else for(u=1;u<s.length;u++)this.lineTo(A(i,s[u].x),A(i,s[u].y));return this.closePath().stroke(e).fill(t).restore()},lines:function(t,e,i,n){if(!e)return this;this.save().gCo(n).beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0]),A(e,t[1]));for(var o=2;o<t.length-1;o+=2)this.lineTo(A(e,t[o]),A(e,t[o+1]));return this.stroke(!0).restore()},bezierCurveTo:function(t){return this.c.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),this},label:function(t,e,i){return this.save().beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0].x),A(e,t[0].y)).bezierCurveTo([t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]).stroke(!0).restore()},lineArray:function(t,e,i,n,o){if(!e)return this;this.save().beginPath().strokeStyle(!0,e,i).moveTo(A(e,t[0].x),A(e,t[0].y));for(var a=1;a<t.length;a++)n?this.bezierCurveTo(h(t,t[a],a,o||1.5)):this.lineTo(A(e,t[a].x),A(e,t[a].y));return this.stroke(!0).restore()},dotted:function(t,e,i,n,o,a,s,r,l){if(!o)return this;t=A(o,t),e=A(o,e),i=A(o,i),n=A(o,n);var c,u=y.distanceP2P(t,e,i,n);if(s<=0||u<=s||t!=i&&e!=n)return this.line(t,e,i,n,o,a,l);(i<t||n<e)&&(c=t,t=i,i=c,c=e,e=n,n=c),this.save().gCo(l).strokeStyle(!0,o,a).beginPath().moveTo(t,e);var g=s*(r||1),h=_(u/(s+g)),d=s<u-h*(s+g),p=e==n;h=d?h+1:h;for(var f=1;f<=h;f++)this.lineTo(p?t+s*f+g*(f-1):t,p?e:e+s*f+g*(f-1)).moveTo(p?t+(s+g)*f:t,p?e:e+(s+g)*f);return d||this.lineTo(i,n),this.stroke(!0).restore()},line:function(t,e,i,n,o,a,s){return o?(this.save().gCo(s),this.beginPath().strokeStyle(!0,o,a).moveTo(A(o,t),A(o,e)).lineTo(A(o,i),A(o,n)).stroke(!0).restore()):this},round:function(t,e,i,n,o,a){return this.arc(t,e,i,0,0,v,n,!!a,o,a)},round0:function(t,e,i,n,o){return this.arc(t.x,t.y,e,0,0,v,i,!!o,n,o)},fillRect:function(t,e,i,n){return this.c.fillRect(t,e,i,n),this},translate:function(t,e){return this.c.translate(t,e),this},rotate:function(t){return this.c.rotate(t),this},clearRect:function(t,e,i,n){return t=t||0,e=e||0,i=i||this.canvas.width,n=n||this.canvas.height,this.c.clearRect(t,e,i,n),this},gCo:function(t){return t?this.gCO(t):this},gCO:function(t){return this.c.globalCompositeOperation=t?"destination-over":"source-over",this},box:function(t,e,i,n,o,a,s,r,l){if((o=o||{enable:0}).enable){var c=o.width,u=o.color,g=o.radius,h=y.isNumber(c);(c=y.parsePadding(c))[0]==c[1]&&c[1]==c[2]&&c[2]==c[3]&&(h=!0),i+=(r=r?1:-1)*(c[1]+c[3])/2,n+=r*(c[0]+c[2])/2,t-=r*(c[3]/2),e-=r*(c[0]/2),c=h?c[0]:c,g=h&&g&&0!=g&&"0"!=g?y.parsePadding(g):0}return this.save().gCo(l).fillStyle(a).strokeStyle(h,c,u),g?this.beginPath().moveTo(A(c,t+g[0]),A(c,e)).lineTo(A(c,t+i-g[1]),A(c,e)).arc2(A(c,t+i-g[1]),A(c,e+g[1]),g[1],3*d/2,v).lineTo(A(c,t+i),A(c,e+n-g[2])).arc2(A(c,t+i-g[2]),A(c,e+n-g[2]),g[2],0,d/2).lineTo(A(c,t+g[3]),A(c,e+n)).arc2(A(c,t+g[3]),A(c,e+n-g[3]),g[3],d/2,d).lineTo(A(c,t),A(c,e+g[0])).arc2(A(c,t+g[0]),A(c,e+g[0]),g[0],d,3*d/2).closePath().shadowOn(s).stroke(c).shadowOff().fill(a):!o.enable||h?(c&&o.enable&&(this.shadowOn(s).c.strokeRect(t,e,i,n),this.shadowOff()),a&&this.fillRect(t,e,i,n)):(c&&(u=y.isArray(u)?u:[u,u,u,u],this.shadowOn(s).line(t+i,e+c[0]/2,t+i,e+n-c[0]/2,c[1],u[1],0).line(t,e+c[0]/2,t,e+n-c[0]/2,c[3],u[3],0).line(_(t-c[3]/2),e,t+i+c[1]/2,e,c[0],u[0],0).line(_(t-c[3]/2),e+n,t+i+c[1]/2,e+n,c[2],u[2],0).shadowOff()),a&&this.beginPath().moveTo(_(t+c[3]/2),_(e+c[0]/2)).lineTo(b(t+i-c[1]/2),e+c[0]/2).lineTo(b(t+i-c[1]/2),b(e+n-c[2]/2)).lineTo(_(t+c[3]/2),b(e+n-c[2]/2)).lineTo(_(t+c[3]/2),_(e+c[0]/2)).closePath().fill(a)),this.restore()},toDataURL:function(t){return this.canvas.toDataURL(t||"image/png")},addEvent:function(t,e,i){y.Event.addEvent(this.canvas,t,e,i)}},y.taylor={light:function(t,e){e.highlight=!1,t.on("mouseover",function(){e.highlight=!0,t.redraw("mouseover")}).on("mouseout",function(){e.highlight=!1,t.redraw("mouseout")}).on("beforedraw",function(){return t.push("f_color",e.highlight?t.get("light_color"):t.get("f_color_")),!0})}},y.Chart=y.extend(y.Painter,{configure:function(){y.Chart.superclass.configure.apply(this,arguments),this.type="chart",this.dataType="simple",this.set({id:"",render:"",data:[],width:void 0,height:void 0,lineJoin:"round",align:"center",default_mouseover_css:!0,turn_off_touchmove:!1,showpercent:!1,decimalsnum:1,title:{text:"",fontweight:"bold",fontsize:20,height:30},subtitle:{text:"",fontweight:"bold",fontsize:16,height:20},footnote:{text:"",color:"#5d7f97",textAlign:"right",height:20},animation:!1,doAnimation:null,animation_timing_function:"easeInOut",animation_duration:1e3,z_index:999,legend:{enable:!1},tip:{enable:!1}}),this.registerEvent("beforeAnimation","afterAnimation","resize","animating"),this.T=null,this.Rendered=!1,this.Combination=!1,this.Animationed=!1,this.show=!1,this.data=[],this.plugins=[],this.components=[],this.oneways=[],this.total=0,this.ICHARTJS_CHART=!0},toDataURL:function(t){return this.T.toDataURL(t)},segmentRect:function(){this.Combination||this.T.clearRect()},resetCanvas:function(){this.Combination||this.T.box(this.get("l_originx"),this.get("t_originy"),this.get("client_width"),this.get("client_height"),0,this.get("f_color"),0,0,!0)},animation:function(e){e.segmentRect(),e.coo&&!e.ILLUSIVE_COO&&e.coo.draw(),e.doAnimation(e.variable.animation.time,e.duration,e),e.plugins.each(function(t){t.A_draw&&(t.variable.animation.animating=!0,t.variable.animation.time=e.variable.animation.time,t.draw(),t.variable.animation.animating=!1)}),e.Combination||(e.oneways.each(function(t){t.draw()}),e.variable.animation.time<e.duration?(e.variable.animation.time++,y.requestAnimFrame(function(){e.animation(e)})):y.requestAnimFrame(function(){e.Animationed=!0,e.plugins.each(function(t){t.Animationed=!0}),e.processAnimation=!1,e.draw(),e.plugins.each(function(t){t.processAnimation=!1}),e.fireEvent(e,"afterAnimation",[e])}))},runAnimation:function(t){t.fireEvent(t,"beforeAnimation",[t]),t.A_draw||(t.variable.animation={type:0,time:0,queue:[]}),t.processAnimation=!0,t.animation(t)},doSort:function(){var t=function(t,e){return(y.isArray(t)?t.zIndex||0:t.get("z_index"))>(y.isArray(e)?e.zIndex||0:e.get("z_index"))};this.components.sor(t),this.oneways.sor(t)},commonDraw:function(t,e){t.show=!1,t.redraw||(y.Assert.isTrue(t.Rendered,t.type+" has not rendered"),y.Assert.isTrue(t.data&&0<t.data.length,t.type+"'s data is empty"),y.Assert.isTrue(t.initialization,t.type+" Failed to initialize"),t.doSort()),t.redraw=!0,t.Animationed||!t.get("animation")?(t.segmentRect(),t.components.eachAll(function(t){t.draw(e)}),t.components.eachAll(function(t){t.last&&t.last(t)}),t.oneways.each(function(t){t.draw()}),t.show=!0):t.runAnimation(t)},plugin:function(t){var e=this._();t.inject(e),t.ICHARTJS_CHART&&(t.Combination=!0,t.setUp()),e.get("animation")||t.push("animation",!1),t.duration=e.duration,e.register(t),e.plugins.push(t)},destroy:function(t){t.components.eachAll(function(t){t.destroy()}),t.oneways.each(function(t){t.destroy()})},getTitle:function(){return this.title},getSubTitle:function(){return this.subtitle},getFootNote:function(){return this.footnote},getDrawingArea:function(){return{x:this.get("l_originx"),x:this.get("t_originy"),width:this.get("client_width"),height:this.get("client_height")}},create:function(t,e){if(t.get("fit")){var i=window.innerWidth,n=window.innerHeight,o=y.getDoc().body.style;o.padding="0px",o.margin="0px",o.overflow="hidden",t.push(t.W,i),t.push(t.H,n)}t.canvasid=y.uid(t.type),t.shellid="shell-"+t.canvasid;var a=[];a.push("<div id='"),a.push(t.shellid),a.push("' style='padding:0px;margin:0px;overflow:hidden;position:relative;'>"),a.push("<canvas id= '"),a.push(t.canvasid),a.push("' style='-webkit-text-size-adjust: none;'>"),a.push("<p>Your browser does not support the canvas element. Please upgrade your Internet Explorer to version 9 or newer in order to view the charts.</p></canvas>"),a.push("</div>"),e.innerHTML=a.join(""),t.shell=y(t.shellid),t.T=t.target=new s(t.canvasid),t.size(t),t.Rendered=!0},setUp:function(){var t=this._();t.redraw=!1,t.T.clearRect(),t.initialization=!1,t.initialize()},load:function(t){var e=this._();e.push("data",t||[]),e.Animationed=!1,(e.Combination?e.root:e).draw()},resize:function(e,i){e=y.parseFloat(e),i=y.parseFloat(i);var t=this._();t.Combination||(t.width=t.push(t.W,e),t.height=t.push(t.H,i),t.size(t)),t.set(t.fireEvent(t,"resize",[e,i])),t.setUp(),t.plugins.eachAll(function(t){t.Combination&&t.resize(e,i)}),t.Combination||t.draw()},size:function(t){t.T.canvas.width=t.width=t.pushIf(t.W,400),t.T.canvas.height=t.height=t.pushIf(t.H,300),t.shell.style.width=t.width+"px",t.shell.style.height=t.height+"px"},initialize:function(){var e=this._(),t=e.get("data"),i=e.get("render");e.push(e.X,null),e.push(e.Y,null),e.Combination?(y.apply(e.options,y.clone([e.W,e.H,"padding","border","client_height","client_width","minDistance","maxDistance","centerx","centery","l_originx","r_originx","t_originy","b_originy"],e.root.options,!0)),e.width=e.get(e.W),e.height=e.get(e.H),e.shell=e.root.shell,e.Rendered=!0):e.Rendered||i&&e.create(e,y(i)),e.Rendered&&!e.initialization&&(t&&0<t.length?function(i,o){var a,s,r=0,l=0,c=!1,t=o.get("labels");if(o.data=i,"simple"==o.dataType)o.total=0,i.each(function(t,e){if(t.background_color=t.color,r=t.value||0,y.isArray(r)){var i=0;l=r.length>l?r.length:l;for(var n=0;n<r.length;n++)r[n]=D(r[n]),i+=r[n],c||(a=s=r[n],c=!0),a=m(r[n],a),s=w(r[n],s);t.total=i}else r=D(r),t.value=r,o.total+=r,c||(a=s=r,c=!0),a=m(r,a),s=w(r,s)},o),y.isArray(t)&&(l=t.length>l?t.length:l),o.push("maxItemSize",l);else if("stacked"==o.dataType||"complex"==o.dataType){var n,u,g,e=t.length,h="stacked"==o.dataType;if(0==e){e=i[0].value.length;for(var d=0;d<e;d++)t.push("")}for(o.columns=[],d=0;d<e;d++)n=[],u=0,i.each(function(t,e){(r=t.value[d])&&(t.value[d]=r=D(r),u+=r,h?g=i[e].color:(g=t.color,c||(a=s=r,c=!0),a=m(r,a),s=w(r,s)),n.push(y.applyIf({name:t.name,value:t.value[d],background_color:g,color:g},y.isArray(t.extra)?t.extra[d]||{}:t)))}),h&&(c||(a=s=r,c=!0),a=m(u,a),s=w(u,s)),o.columns.push({total:u,name:t[d],item:n})}o.push("minValue",s),o.push("maxValue",a),o.doConfig(),o.initialization=!0}.call(e,t,e):y.isString(e.get("url"))&&e.ajax.call(e,e.get("url"),function(t){e.push("data",t),e.initialize(),e.draw()}))},eventOff:function(){this.stopEvent=!0},eventOn:function(){this.stopEvent=!1},oneWay:function(i){i.T.strokeStyle(!0,0,i.get("strokeStyle"),i.get("lineJoin")),i.processAnimation=i.get("animation"),y.isFunction(i.get("doAnimation"))&&(i.doAnimation=i.get("doAnimation")),i.animationArithmetic=y.getAA(i.get("animation_timing_function"));var o,a=i.variable.event,t=i.Combination,e=!i.get("turn_off_touchmove")&&!t,n=!y.touch&&i.get("default_mouseover_css")&&!t,s=y.touch?["touchstart","touchmove"]:["click","mousemove"];i.stopEvent=!1,i.A_draw=t&&i.processAnimation,y.register(i),t||s.each(function(e){i.T.addEvent(e,function(t){i.processAnimation||i.stopEvent||t.targetTouches&&1!=t.targetTouches.length||i.fireEvent(i,e,[i,y.Event.fix(t)])},!1)}),i.on(s[0],function(t,i){if(t.components.eachAll(function(t){if(t)if(t.ICHARTJS_CHART){if(t.fireEvent(t,s[0],[t,i]))return!(a.click=!0)}else{var e=t.isMouseOver(i);if(e.valid)return a.click=!0,t.fireEvent(t,"click",[t,i,e]),!i.stopPropagation}}),a.click)return e&&i.event.preventDefault(),!(a.click=!1)}),y.touch&&!e||(i.on(s[1],function(t,n){if(o=!1,t.components.eachAll(function(t){if(!t.ICHARTJS_CHART){var e=t.variable.event,i=t.isMouseOver(n);if(i.valid){if(o=o||t.atomic,e.mouseover||(e.mouseover=!0,t.fireEvent(t,"mouseover",[t,n,i])),t.fireEvent(t,"mousemove",[t,n,i]),i.stop)return!1}else e.mouseover&&(e.mouseover=!1,t.fireEvent(t,"mouseout",[t,n,i]));return!n.stopPropagation}if(t.fireEvent(t,s[1],[t,n]))return!(o=!0)}),a.mouseover)return n.event.preventDefault(),o||(a.mouseover=!1,t.fireEvent(t,"mouseout",[t,n])),a.mouseover;o&&(a.mouseover=o,t.fireEvent(t,"mouseover",[t,n]))}),n&&i.on("mouseover",function(){i.T.css("cursor","pointer")}).on("mouseout",function(){i.T.css("cursor","default")})),y.applyIf(i.get("sub_option"),y.clone(["shadow","tip"],i.options,!0)),i.Combination||(i.bg=new y.Custom({z_index:-1,drawFn:function(){i.T.box(0,0,i.width,i.height,i.get("border"),i.get("f_color"),0,0,!0)}}),i.duration=b(i.get("animation_duration")*y.FRAME/1e3)),i.oneWay=y.emptyFn},originXY:function(t,e,i){var n=t.get("align");return n==t.L?t.pushIf(t.X,e[0]):n==t.R?t.pushIf(t.X,e[1]):t.pushIf(t.X,e[2]),t.x=t.push(t.X,t.get(t.X)+t.get("offsetx")),t.y=t.push(t.Y,i[0]+t.get("offsety")),{x:t.x,y:t.y}},getPercent:function(t,e){return this.get("showpercent")?(t/(e||this.total||1)*100).toFixed(this.get("decimalsnum"))+"%":t},doActing:function(t,e,i,n,o){var a=!!t.get("communal_acting"),s=t.getPercent(e.value,e.total);t.push(a?"sub_option":"communal_acting",y.clone(t.get(a?"communal_acting":"sub_option"),!0)),y.merge(t.get("sub_option"),e),y.merge(t.get("sub_option"),i),t.push("sub_option.value",s),t.push("sub_option.value_",e.value),t.get("sub_option.tip.enable")&&(t.push("sub_option.tip.text",o||e.name+" "+s),t.push("sub_option.tip.name",e.name),t.push("sub_option.tip.index",n),t.push("sub_option.tip.value",e.value),t.push("sub_option.tip.total",e.total||t.total))},register:function(t){return t.id=y.uid(t.type),this.components.push(t),t},remove:function(i,n){n&&i.components.each(function(t,e){if(n.id==t.id)return i.components.splice(e,1),!1})},doConfig:function(){y.Chart.superclass.doConfig.call(this);var t=this._();if(t.destroy(t),t.oneways.length=0,t.oneWay(t),t.push("communal_acting",0),!t.Combination){t.oneways.push(t.bg),t.push("r_originx",t.width-t.get("padding_right")),t.push("b_originy",t.height-t.get("padding_bottom")),t.applyGradient(),y.isString(t.get("title"))&&t.push("title",y.applyIf({text:t.get("title")},t.default_.title)),y.isString(t.get("subtitle"))&&t.push("subtitle",y.applyIf({text:t.get("subtitle")},t.default_.subtitle)),y.isString(t.get("footnote"))&&t.push("footnote",y.applyIf({text:t.get("footnote")},t.default_.footnote));var e,i=0,n=t.push("l_originx",t.get("padding_left")),o=t.push("t_originy",t.get("padding_top")),a=t.push("client_width",t.width-t.get("hpadding"));if(""!=t.get("title.text")){var s=""!=t.get("subtitle.text");i=s?t.get("title.height")+t.get("subtitle.height"):t.get("title.height"),o=t.push("t_originy",o+i),t.push("title.originx",n),t.push("title.originy",t.get("padding_top")),t.push("title.maxwidth",a),t.pushIf("title.width",a),t.title=new y.Text(t.get("title"),t),t.oneways.push(t.title),s&&(t.push("subtitle.originx",n),t.push("subtitle.originy",t.get("padding_top")+t.get("title.height")),t.pushIf("subtitle.width",a),t.push("subtitle.maxwidth",a),t.subtitle=new y.Text(t.get("subtitle"),t),t.oneways.push(t.subtitle))}if(""!=t.get("footnote.text")){var r=t.get("footnote.height");i+=r,t.push("b_originy",t.get("b_originy")-r),t.push("footnote.originx",n),t.push("footnote.originy",t.get("b_originy")),t.push("footnote.maxwidth",a),t.pushIf("footnote.width",a),t.footnote=new y.Text(t.get("footnote"),t),t.oneways.push(t.footnote)}e=t.push("client_height",t.get(t.H)-t.get("vpadding")-t.pushIf("other_height",i)),t.push("minDistance",w(a,e)),t.push("maxDistance",m(a,e)),t.push("centerx",n+a/2),t.push("centery",o+e/2)}t.get("legend.enable")&&(t.legend=new y.Legend(y.apply({maxwidth:t.get("client_width"),data:t.data},t.get("legend")),t),t.oneways.push(t.legend)),t.push("sub_option.tip.wrap",t.push("tip.wrap",t.shell))}})}(S),S.Custom=S.extend(S.Component,{configure:function(){S.Custom.superclass.configure.apply(this,arguments),this.type="custom",this.set({drawFn:S.emptyFn,configFn:S.emptyFn,eventValid:void 0,animating_draw:!0})},doDraw:function(t){t.get("drawFn").call(t,t)},isEventValid:function(t,e){return S.isFunction(this.get("eventValid"))?this.get("eventValid").call(this,t,e):{valid:!1}},doConfig:function(){S.Custom.superclass.doConfig.call(this);var t=this._();t.A_draw=t.get("animating_draw"),t.variable.animation={animating:!1,time:0},t.duration=0,t.get("configFn").call(t,t)}}),S.Scale=S.extend(S.Component,{configure:function(){S.Scale.superclass.configure.apply(this,arguments),this.type="scale",this.set({position:"left",which:"h",basic_value:0,scale2grid:!0,distance:void 0,start_scale:0,end_scale:void 0,min_scale:void 0,max_scale:void 0,scale_space:void 0,scale_share:5,scale_enable:!0,scale_size:1,scale_width:4,scale_color:"#333333",scaleAlign:"center",labels:[],label:{},text_space:6,textAlign:"left",decimalsnum:0,join_style:"none",join_size:2}),this.registerEvent("parseText")},isEventValid:function(){return{valid:!1}},getScale:function(t){var e=[t.get("basic_value"),t.get("start_scale"),t.get("end_scale"),t.get("end_scale")-t.get("start_scale"),0];return e[4]=S.inRange(e[1],e[2]+1,e[0])||S.inRange(e[2]-1,e[1],e[0]),{range:e[4],basic:e[4]?(e[0]-e[1])/e[3]:0,start:e[4]?e[0]:e[1],end:e[2],distance:e[3]}},doDraw:function(e){e.get("scale_enable")&&e.items.each(function(t){e.T.line(t.x0,t.y0,t.x1,t.y1,e.get("scale_size"),e.get("scale_color"),!1)}),e.labels.each(function(t){t.draw()})},doLayout:function(e,i,t){t.get("scale_enable")&&t.items.each(function(t){t.x0+=e,t.y0+=i,t.x1+=e,t.y1+=i}),t.labels.each(function(t){t.doLayout(e,i,0,t)})},doConfig:function(){S.Scale.superclass.doConfig.call(this);var t=this._(),e=Math.abs,i=t.get("labels").length,n=t.get("min_scale"),o=t.get("max_scale"),a=t.get("scale_space"),s=t.get("end_scale"),r=t.get("start_scale");if(t.items=[],t.labels=[],(t.number=0)<i)t.number=i-1;else{if(n<r&&(r=t.push("start_scale",S.floor(n))),(!S.isNumber(s)||s<o)&&(s=S.ceil(o),s=t.push("end_scale",s||r?s:1)),a&&e(a)<e(s-r)&&t.push("scale_share",(s-r)/a),t.number=t.push("scale_share",e(t.get("scale_share"))),!a||s-r<a){for(var l=(s-r+"").indexOf(".")+1,c=1;0<l;)l--,c*=10;a=t.push("scale",(s-r)*c/t.get("scale_share")/c)}parseInt(a)!=a&&0==t.get("decimalsnum")&&t.push("decimalsnum",(a+"").substring((a+"").indexOf(".")+1).length)}t.push("distanceOne",t.get("valid_distance")/t.number);var u,g,h,d=0,p=0,f=0,y=0,x=0,b=0,_=t.get("scale_width"),v=_/2,m=t.get("scaleAlign"),w=t.get("position"),T=t.get("text_space"),C="",A=t.get("coo").get("axis.width");t.push("which",t.get("which").toLowerCase()),t.isH="h"==t.get("which"),t.isH?(m==t.O?y=-_:p=m==t.C?(y=-v,v):_,C=w==t.O?(b=-T-A[0],t.B):(b=T+A[2],t.O),w=t.C):(m==t.L?f=-_:d=m==t.C?(f=-v,v):_,C="middle",x=w==t.R?(w=t.L,T+A[1]):(w=t.R,-T-A[3]));for(var D=0;D<=t.number;D++)u=i?t.get("labels")[D]:(a*D+r).toFixed(t.get("decimalsnum")),g=t.isH?t.get("valid_x")+D*t.get("distanceOne"):t.x,h=t.isH?t.y:t.get("valid_y")+t.get("valid_distance")-D*t.get("distanceOne"),t.items.push({x:g,y:h,x0:g+f,y0:h+y,x1:g+d,y1:h+p}),t.get("label")&&t.labels.push(new S.Text(S.applyIf(S.apply(t.get("label"),S.merge({text:u,x:g,y:h,originx:g+x,originy:h+b},t.fireEvent(t,"parseText",[u,g+x,h+b,D,t.number==D]))),{textAlign:w,textBaseline:C}),t))}}),S.Coordinate={coordinate_:function(t){var e=this._(),i=e.get("coordinate");if(i.ICHARTJS_OBJECT)return e.x=e.push(e.X,i.x),e.y=e.push(e.Y,i.y),e.ILLUSIVE_COO=!0,i;var n=S.parsePercent,o=e.get("coordinate.scale"),a=e.get("scaleAlign"),s=e.push("coordinate._width",n(e.get("coordinate.width")||"85%",Math.floor(e.get("client_width"))));if(h=e.push("coordinate._height",n(e.get("coordinate.height")||"85%",Math.floor(e.get("client_height")))-(e.is3D()?(e.get("coordinate.pedestal_height")||22)+(e.get("coordinate.board_deep")||20):0)),e.push("coordinate.valid_height_value",n(e.get("coordinate.valid_height"),h)),e.push("coordinate.valid_width_value",n(e.get("coordinate.valid_width"),s)),e.originXY(e,[e.get("l_originx"),e.get("r_originx")-s,e.get("centerx")-s/2],[e.get("centery")-h/2]),e.push("coordinate.originx",e.x),e.push("coordinate.originy",e.y),t&&t(),S.isObject(o)&&(o=[o]),S.isArray(o)){var r="stacked"!=e.dataType;o.each(function(t){e.get("percent")&&t.position==a&&(t=S.apply(t,{start_scale:0,end_scale:100,scale_space:10,listeners:{parseText:function(t,e,i){return{text:t+"%"}}}})),(!t.start_scale||r&&t.start_scale>e.get("minValue"))&&(t.min_scale=e.get("minValue")),(!t.end_scale||r&&t.end_scale<e.get("maxValue"))&&(t.max_scale=e.get("maxValue"))})}else e.push("coordinate.scale",{position:a,scaleAlign:a,max_scale:e.get("maxValue"),min_scale:e.get("minValue")});return e.is3D()&&(e.push("coordinate.xAngle_",e.get("xAngle_")),e.push("coordinate.yAngle_",e.get("yAngle_")),e.push("coordinate.zHeight",e.get("zHeight")*e.get("bottom_scale"))),e.remove(e,e.coo),e.register(new(S[e.is3D()?"Coordinate3D":"Coordinate2D"])(e.get("coordinate"),e))}},S.Coordinate2D=S.extend(S.Component,{configure:function(){S.Coordinate2D.superclass.configure.apply(this,arguments),this.type="coordinate2d",this.set({sign_size:12,sign_space:5,scale:[],width:"85%",height:"85%",valid_width:"100%",valid_height:"100%",grid_line_width:1,grid_color:"#dbe1e1",gridHStyle:{},gridVStyle:{},gridlinesVisible:!0,scale2grid:!0,grids:void 0,ignoreOverlap:!0,ignoreEdge:!1,xlabel:"",ylabel:"",background_color:0,striped:!0,striped_direction:"v",striped_factor:.01,crosshair:{enable:!1},z_index:-1,axis:{enable:!0,color:"#666666",width:1}}),this.scale=[],this.gridlines=[]},getScale:function(t,e){for(var i=this._(),n=0;n<i.scale.length;n++)if(i.scale[n].get("position")==t)return i.scale[n].getScale(i.scale[n]);if(!e)return t=t==i.L?i.R:t==i.R?i.L:t==i.O?i.B:i.O,i.getScale(t,!0);throw new Error("there no valid scale")},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},doDraw:function(i){if(i.T.box(i.x,i.y,i.width,i.height,0,i.get("f_color")),i.get("striped"))var n,o,a=!1,s=(i.get("axis.width"),S.dark(i.get("background_color"),i.get("striped_factor"),0));var r="v"==i.get("striped_direction");i.gridlines.each(function(t,e){i.get("striped")&&(a&&(r?i.T.box(t.x1,t.y1+t.width,t.x2-t.x1,o-t.y1-t.width,0,s):i.T.box(n+t.width,t.y2,t.x1-n,t.y1-t.y2,0,s)),n=t.x1,o=t.y1,a=!a)}).each(function(t){t.overlap||(t.solid?i.T.line(t.x1,t.y1,t.x2,t.y2,t.width,t.color):i.T.dotted(t.x1,t.y1,t.x2,t.y2,t.width,t.color,t.size,t.fator))}),i.T.box(i.x,i.y,i.width,i.height,i.get("axis"),!1,i.get("shadow"),!0),i.scale.each(function(t){t.draw()})},destroy:function(){this.crosshair&&this.crosshair.destroy()},doCrosshair:function(t){t.get("crosshair.enable")&&!t.crosshair&&(t.push("crosshair.wrap",t.root.shell),t.push("crosshair.height",t.height),t.push("crosshair.width",t.width),t.push("crosshair.top",t.y),t.push("crosshair.left",t.x),t.crosshair=new S.CrossHair(t.get("crosshair"),t))},doConfig:function(){S.Coordinate2D.superclass.doConfig.call(this);var n=this._();if(n.atomic=!1,n.width=n.get("_width"),n.height=n.get("_height"),n.valid_width=n.get("valid_width_value"),n.valid_height=n.get("valid_height_value"),n.get("gradient")&&S.isString(n.get("f_color"))&&n.push("f_color",n.T.avgLinearGradient(n.x,n.y,n.x,n.y+n.height,[n.get("dark_color"),n.get("light_color")])),n.get("axis.enable")){var t=n.get("axis.width");S.isArray(t)||n.push("axis.width",[t,t,t,t])}else n.push("axis.width",[0,0,0,0]);n.doCrosshair(n);var i,e=!(!n.get("gridlinesVisible")||!n.get("grids")),o=e&&!!n.get("grids.horizontal"),a=e&&!!n.get("grids.vertical"),s=n.height,r=n.width,l=n.valid_width,c=n.valid_height,u=n.get("gridlinesVisible")&&n.get("scale2grid")&&!(o&&a),g=n.push("x_start",n.x+(r-l)/2),h=n.push("y_start",n.y+(s-c)/2),d=n.get("axis.width");n.push("x_end",n.x+(r+l)/2),n.push("y_end",n.y+(s+c)/2),S.isArray(n.get("scale"))||(S.isObject(n.get("scale"))?n.push("scale",[n.get("scale")]):n.push("scale",[])),n.get("scale").each(function(t,e){i=(i=(i=t.position)||n.L).toLowerCase(),t[n.X]=n.x,t.coo=n,t[n.Y]=n.y,t.valid_x=g,t.valid_y=h,(t.position=i)==n.O?(t.which="h",t.distance=r,t.valid_distance=l):i==n.R?(t.which="v",t.distance=s,t.valid_distance=c,t[n.X]+=r,t.valid_x+=l):i==n.B?(t.which="h",t.distance=r,t.valid_distance=l,t[n.Y]+=s,t.valid_y+=c):(t.which="v",t.distance=s,t.valid_distance=c),n.scale.push(new S.Scale(t,n.root))},n);var p=n.push("ignoreOverlap",n.get("ignoreOverlap")&&n.get("axis.enable")||n.get("ignoreEdge"));if(p)if(n.get("ignoreEdge"))var f=function(t,e,i){return"v"==t?i==n.y||i==n.y+s:e==n.x||e==n.x+t};else f=function(t,e,i){return"v"==t?i==n.y&&0<d[0]||i==n.y+s&&0<d[2]:e==n.x&&0<d[3]||e==n.x+r&&0<d[1]};var y,x,b,_={solid:!0,size:10,fator:1,width:n.get("grid_line_width"),color:n.get("grid_color")},v=S.applyIf(n.get("gridHStyle"),_),m=S.applyIf(n.get("gridVStyle"),_);u&&n.scale.each(function(e){b=e.get("position"),S.isFalse(e.get("scale2grid"))||o&&"v"==e.get("which")||a&&"h"==e.get("which")||(y=x=0,b==n.O?x=s:b==n.R?y=-r:b==n.B?x=-s:y=r,e.items.each(function(t){p&&n.gridlines.push(S.applyIf({overlap:f.call(n,e.get("which"),t.x,t.y),x1:t.x,y1:t.y,x2:t.x+y,y2:t.y+x},e.isH?m:v))}))});if(a){var w=n.get("grids.vertical");S.Assert.isTrue(0<w.value,"vertical value");var T=r/w.value,C=w.value;"given_value"==w.way&&(C=T,T=w.value,T=r<T?r:T);for(var A=0;A<=C;A++)p&&n.gridlines.push(S.applyIf({overlap:f.call(n,"h",n.x+A*T,n.y),x1:n.x+A*T,y1:n.y,x2:n.x+A*T,y2:n.y+s,H:!1,width:m.width,color:m.color},m))}if(o){var D=n.get("grids.horizontal");S.Assert.isTrue(0<D.value,"horizontal value");T=s/D.value,C=D.value;"given_value"==D.way&&(C=T,T=D.value,T=s<T?s:T);for(A=0;A<=C;A++)p&&n.gridlines.push(S.applyIf({overlap:f.call(n,"v",n.x,n.y+A*T),x1:n.x,y1:n.y+A*T,x2:n.x+r,y2:n.y+A*T,H:!0,width:v.width,color:v.color},v))}}}),S.Coordinate3D=S.extend(S.Coordinate2D,{configure:function(){S.Coordinate3D.superclass.configure.apply(this,arguments),this.type="coordinate3d",this.dimension=S._3D,this.set({xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,zHeight:0,pedestal_height:22,board_deep:20,left_board:!0,gradient:!0,color_factor:.18,ignoreEdge:!0,striped:!1,grid_color:"#a4ad96",background_color:"#d6dbd2",shadow_offsetx:4,shadow_offsety:2,wall_style:[],axis:{enable:!1}})},doDraw:function(e){var t=e.width,i=e.height,n=e.get("xAngle_"),o=e.get("yAngle_"),a=e.get("zHeight"),s=e.get("z_offx"),r=e.get("z_offy");e.get("pedestal_height")&&e.T.cube3D(e.x,e.y+i+e.get("pedestal_height"),n,o,!1,t,e.get("pedestal_height"),a+e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("bottom_style")),e.get("board_deep")&&e.T.cube3D(e.x+s,e.y+i-r,n,o,!1,t,i,e.get("board_deep"),e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("board_style")),e.T.cube3D(e.x,e.y+i,n,o,!1,t,i,a,e.get("axis.enable"),e.get("axis.width"),e.get("axis.color"),e.get("wall_style")),e.gridlines.each(function(t){t.solid?(e.get("left_board")&&e.T.line(t.x1,t.y1,t.x1+s,t.y1-r,t.width,t.color),e.T.line(t.x1+s,t.y1-r,t.x2+s,t.y2-r,t.width,t.color)):(e.get("left_board")&&e.T.dotted(t.x1,t.y1,t.x1+s,t.y1-r,t.width,t.color,t.size,t.fator),e.T.dotted(t.x1+s,t.y1-r,t.x2+s,t.y2-r,t.width,t.color,t.size,t.fator))}),e.scale.each(function(t){t.draw()})},doConfig:function(){S.Coordinate3D.superclass.doConfig.call(this);for(var t=this._(),e=t.get("wall_style"),i=t.get("background_color")||"#d6dbd2",n=t.height,o=t.width,a=t.get("color_factor"),s=t.push("z_offx",t.get("xAngle_")*t.get("zHeight")),r=t.push("z_offy",t.get("yAngle_")*t.get("zHeight"));e.length<6;)e.push({color:i});t.get("left_board")||(e[2]=!1,t.scale.each(function(t){t.doLayout(s,-r,t)})),t.push("bottom_style",[{color:t.get("shadow_color"),shadow:t.get("shadow")},!1,!1,{color:e[3].color},!1,{color:e[3].color}]),t.push("board_style",[!1,!1,!1,{color:e[4].color},{color:e[5].color},!1]),t.get("gradient")&&(S.isString(e[0].color)&&(e[0].color=t.T.avgLinearGradient(t.x,t.y+n,t.x+o,t.y+n,[S.dark(e[0].color,a/2+.06),S.dark(e[0].color,a/2+.06)])),S.isString(e[1].color)&&(e[1].color=t.T.avgLinearGradient(t.x+s,t.y-r,t.x+s,t.y+n-r,[S.dark(e[1].color,a),S.light(e[1].color,a)])),S.isString(e[2].color)&&(e[2].color=t.T.avgLinearGradient(t.x,t.y,t.x,t.y+n,[S.light(e[2].color,a/3),S.dark(e[2].color,a)])),t.get("bottom_style")[5].color=t.T.avgLinearGradient(t.x,t.y+n,t.x,t.y+n+t.get("pedestal_height"),[S.light(e[3].color,a/2+.06),S.dark(e[3].color,a/2,0)])),t.push("wall_style",[e[0],e[1],e[2]])}}),S.Rectangle=S.extend(S.Component,{configure:function(){S.Rectangle.superclass.configure.apply(this,arguments),this.type="rectangle",this.set({width:0,height:0,value_space:4,value:"",label:{},name:"",tipAlign:"top",valueAlign:"top",shadow_blur:3,shadow_offsety:-1}),this.atomic=!0,this.registerEvent("parseText"),this.label=null},last:function(t){t.label&&t.label.draw()},doDraw:function(t){t.drawRectangle()},doConfig:function(){S.Rectangle.superclass.doConfig.call(this);var t=this._(),e=t.variable.event,i=t.get("valueAlign");S.taylor.light(t,e),t.width=t.get(t.W),t.height=t.get(t.H);var n=t.push("centerx",t.x+t.width/2),o=t.push("centery",t.y+t.height/2),a=t.C,s="middle",r=t.get("value_space");i==t.L?(a=t.R,n=t.x-r):i==t.R?(a=t.L,n=t.x+t.width+r):i==t.B?(o=t.y+t.height+r,s=t.O):i==t.O&&(o=t.y-r,s=t.B),t.get("label")&&(t.push("label.originx",n),t.push("label.originy",o),t.push("label.text",t.push("value",t.fireString(t,"parseText",[t,t.get("value")],t.get("value")))),S.applyIf(t.get("label"),{textAlign:a,textBaseline:s,color:t.get("color")}),t.label=new S.Text(t.get("label"),t)),t.get("tip.enable")&&("follow"!=t.get("tip.showType")&&t.push("tip.invokeOffsetDynamic",!1),t.tip=new S.Tip(t.get("tip"),t))}}),S.Rectangle2D=S.extend(S.Rectangle,{configure:function(){S.Rectangle2D.superclass.configure.apply(this,arguments),this.type="rectangle2d",this.set({shadow_offsety:-2})},drawRectangle:function(){var t=this._();t.T.box(t.get(t.X),t.get(t.Y),t.get(t.W),t.get(t.H),t.get("border"),t.get("f_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.width&&t.y<e.y+e.height&&t.y>e.y}},tipInvoke:function(){var i=this._();return function(t,e){return{left:i.tipX(t,e),top:i.tipY(t,e)}}},doConfig:function(){S.Rectangle2D.superclass.doConfig.call(this);var i=this._(),t=i.get("tipAlign");t==i.L||t==i.R?i.tipY=function(t,e){return i.get("centery")-e/2}:i.tipX=function(t,e){return i.get("centerx")-t/2},t==i.L?i.tipX=function(t,e){return i.x-i.get("value_space")-t}:t==i.R?i.tipX=function(t,e){return i.x+i.width+i.get("value_space")}:t==i.B?i.tipY=function(t,e){return i.y+i.height+3}:i.tipY=function(t,e){return i.y-e-3},i.applyGradient()}}),S.Rectangle3D=S.extend(S.Rectangle,{configure:function(){S.Rectangle3D.superclass.configure.apply(this,arguments),this.type="rectangle3d",this.dimension=S._3D,this.set({zHeight:void 0,xAngle:60,yAngle:20,xAngle_:void 0,yAngle_:void 0,shadow_offsetx:2})},drawRectangle:function(){var t=this._();t.T.cube(t.get(t.X),t.get(t.Y),t.get("xAngle_"),t.get("yAngle_"),t.get(t.W),t.get(t.H),t.get("zHeight"),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("light_color"),t.get("shadow"))},isEventValid:function(t,e){return{valid:t.x>e.x&&t.x<e.x+e.get(e.W)&&t.y<e.y+e.get(e.H)&&t.y>e.y}},tipInvoke:function(){var i=this._();return function(t,e){return{left:i.topCenterX-t/2,top:i.topCenterY-e}}},doConfig:function(){S.Rectangle3D.superclass.doConfig.call(this);var t=this._();t.pushIf("zHeight",t.get(t.W)),t.topCenterX=t.x+(t.get(t.W)+t.get(t.W)*t.get("xAngle_"))/2,t.topCenterY=t.y-t.get(t.W)*t.get("yAngle_")/2-t.get("value_space"),t.get("valueAlign")==t.O&&t.label&&(t.label.push("textx",t.topCenterX),t.label.push("texty",t.topCenterY))}}),S.Sector=S.extend(S.Component,{configure:function(){S.Sector.superclass.configure.apply(this,arguments),this.type="sector",this.set({value:"",name:"",ignored:!1,counterclockwise:!1,startAngle:0,middleAngle:0,endAngle:0,totalAngle:0,bound_event:"click",expand:!1,donutwidth:0,mutex:!1,increment:void 0,label_length:void 0,gradient_mode:"RadialGradientOutIn",mini_label_threshold_angle:15,mini_label:!1,label:{},rounded:!1}),this.atomic=!0,this.registerEvent("changed","parseText"),this.label=null,this.tip=null},bound:function(){this.expanded||this.toggle()},rebound:function(){this.expanded&&this.toggle()},toggle:function(){this.fireEvent(this,this.get("bound_event"),[this])},getDimension:function(){var t=this._();return{x:t.x,x:t.y,startAngle:t.get("startAngle"),middleAngle:t.get("middleAngle"),endAngle:t.get("endAngle")}},doDraw:function(t){t.get("ignored")||(t.label&&!t.get("mini_label")&&t.label.draw(),t.drawSector(),t.label&&t.get("mini_label")&&t.label.draw())},doText:function(t,e,i){t.push("label.originx",e),t.push("label.originy",i),t.push("label.textBaseline","middle"),t.label=new S.Text(t.get("label"),t)},doLabel:function(t,e,i,n,o,a,s,r){t.push("label.originx",e),t.push("label.originy",i),t.push("label.quadrantd",n),t.push("label.line_points",o),t.push("label.labelx",a),t.push("label.labely",s),t.push("label.smooth",r),t.push("label.angle",t.get("middleAngle")%(2*Math.PI)),t.label=new S.Label(t.get("label"),t)},isLabel:function(){return this.get("label")&&!this.get("mini_label")},doConfig:function(){S.Sector.superclass.doConfig.call(this);var i,n=this._(),o=n.variable.event,a=n.get("label"),s=n.get("bound_event");if(n.get("rounded"))return n.push("startAngle",0),void n.push("endAngle",2*Math.PI);S.taylor.light(n,o),n.push("totalAngle",n.get("endAngle")-n.get("startAngle")),a&&(n.get("mini_label")&&(n.get("mini_label_threshold_angle")*Math.PI/180>n.get("totalAngle")?n.push("mini_label",!1):S.apply(n.get("label"),n.get("mini_label"))),n.push("label.text",n.fireString(n,"parseText",[n,n.get("label.text")],n.get("label.text"))),n.pushIf("label.border.color",n.get("border.color")),n.push("label.scolor",n.get("background_color"))),n.variable.event.status=n.expanded=n.get("expand"),n.get("tip.enable")&&("follow"!=n.get("tip.showType")&&n.push("tip.invokeOffsetDynamic",!1),n.tip=new S.Tip(n.get("tip"),n)),o.poped=!1,n.on(s,function(){o.poped=!0,n.expanded=!n.expanded,n.redraw(s),o.poped=!1}),n.on("beforedraw",function(t,e){return e==s&&(i=!1,n.x=n.get(n.X),n.y=n.get(n.Y),n.expanded&&(n.get("mutex")&&!o.poped?(n.expanded=!1,i=!0):(n.x+=n.get("inc_x"),n.y-=n.get("inc_y"))),o.status!=n.expanded&&(n.fireEvent(n,"changed",[n,n.expanded]),i=!0,o.status=n.expanded),a&&i&&n.label.doLayout(n.get("inc_x")*(n.expanded?1:-1),-n.get("inc_y")*(n.expanded?1:-1),2,n.label)),!0})}}),S.Sector2D=S.extend(S.Sector,{configure:function(){S.Sector2D.superclass.configure.apply(this,arguments),this.type="sector2d",this.set({radius:0})},drawSector:function(){this.T.sector(this.x,this.y,this.r,this.get("donutwidth"),this.get("startAngle"),this.get("endAngle"),this.get("f_color"),this.get("border.enable"),this.get("border.width"),this.get("border.color"),this.get("shadow"),this.get("counterclockwise"))},isEventValid:function(t,e){if(!e.get("ignored")){if(e.isLabel()&&e.label.isEventValid(t,e.label).valid)return{valid:!0};var i=S.distanceP2P(e.x,e.y,t.x,t.y),n=e.get("donutwidth");if(e.r<i||n&&e.r-n>i)return{valid:!1};if(S.angleInRange(e.get("startAngle"),e.get("endAngle"),S.atan2Radian(e.x,e.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},tipInvoke:function(){var n=this,o=n.get("middleAngle"),a=S.quadrantd(o);return function(t,e){var i=S.p2Point(n.x,n.y,o,.8*n.r);return{left:1<=a&&a<=2?i.x-t:i.x,top:2<=a?i.y-e:i.y}}},doConfig:function(){S.Sector2D.superclass.doConfig.call(this);var t=this._();t.r=t.get("radius"),t.get("donutwidth")>t.r&&t.push("donutwidth",0),t.applyGradient(t.x-t.r,t.y-t.r,2*t.r*.9,2*t.r*.9);var e=t.get("middleAngle"),i=t.pushIf("increment",S.lowTo(5,t.r/10));if(t.push("inc_x",i*Math.cos(2*Math.PI-e)),t.push("inc_y",i*Math.sin(2*Math.PI-e)),i*=2,t.get("label"))if(t.get("mini_label"))P2=S.p2Point(t.x,t.y,e,t.get("donutwidth")?t.r-t.get("donutwidth")/2:5*t.r/8),t.doText(t,P2.x,P2.y);else{var n=S.quadrantd(e),o=S.p2Point(t.x,t.y,e,t.r+i),a=S.p2Point(t.x,t.y,e,t.r+.6*i);P2=S.p2Point(t.x,t.y,e,t.r),t.doLabel(t,P2.x,P2.y,n,[{x:P2.x,y:P2.y},{x:a.x,y:a.y},{x:o.x,y:o.y}],o.x,o.y,.4*i)}}}),S.Sector3D=S.extend(S.Sector,{configure:function(){S.Sector3D.superclass.configure.apply(this,arguments),this.type="sector3d",this.dimension=S._3D,this.set({semi_major_axis:0,semi_minor_axis:0,cylinder_height:0}),this.proxy=!0},isEventValid:function(t,e){if(!e.get("ignored")){if(e.isLabel()&&e.label.isEventValid(t,e.label).valid)return{valid:!0};if(!S.inEllipse(t.x-e.x,t.y-e.y,e.a,e.b))return{valid:!1};if(S.angleZInRange(e.sA,e.eA,S.atan2Radian(e.x,e.y,t.x,t.y)))return{valid:!0}}return{valid:!1}},p2p:function(t,e,i,n){return{x:t+this.a*Math.cos(i)*n,y:e+this.b*Math.sin(i)*n}},tipInvoke:function(){var n=this,o=n.get("middleAngle"),a=S.quadrantd(o);return function(t,e){var i=n.p2p(n.x,n.y,o,.6);return{left:2<=a&&a<=3?i.x-t:i.x,top:3<=a?i.y-e:i.y}}},doConfig:function(){S.Sector3D.superclass.doConfig.call(this);var e=this._(),i=e.get("counterclockwise"),t=e.get("middleAngle");e.a=e.get("semi_major_axis"),e.b=e.get("semi_minor_axis"),e.h=e.get("cylinder_height"),S.Assert.isTrue(0<=e.a*e.b,"major&minor");var n=2*Math.PI,o=function(t){for(;t<0;)t+=n;return Math.abs(S.atan2Radian(0,0,e.a*Math.cos(t),i?-e.b*Math.sin(t):e.b*Math.sin(t)))},a=e.pushIf("increment",S.lowTo(5,e.a/10));if(e.sA=o.call(e,e.get("startAngle")),e.eA=o.call(e,e.get("endAngle")),e.mA=o.call(e,t),e.push("inc_x",a*Math.cos(n-e.mA)),e.push("inc_y",a*Math.sin(n-e.mA)),a*=2,e.get("label"))if(e.get("mini_label")){var s=e.p2p(e.x,e.y,t,.5);e.doText(e,s.x,s.y)}else{var r=S.quadrantd(t),l=e.p2p(e.x,e.y,t,a/e.a+1),c=e.p2p(e.x,e.y,t,.6*a/e.a+1),u=e.p2p(e.x,e.y,t,1);e.doLabel(e,u.x,u.y,r,[{x:u.x,y:u.y},{x:c.x,y:c.y},{x:l.x,y:l.y}],l.x,l.y,.4*a)}}}),S.Pie=S.extend(S.Chart,{configure:function(){S.Pie.superclass.configure.call(this),this.type="pie",this.set({radius:"100%",offset_angle:0,separate_angle:0,bound_event:"click",counterclockwise:!1,intellectLayout:!0,layout_distance:4,pop_animate:!1,mutex:!1,increment:void 0,sub_option:{label:{}}}),this.registerEvent("bound","rebound"),this.sectors=[],this.components.push(this.sectors),this.ILLUSIVE_COO=!0},toggle:function(t){this.sectors[t||0].toggle()},bound:function(t){this.sectors[t||0].bound()},rebound:function(t){this.sectors[t||0].rebound()},getSectors:function(){return this.sectors},doAnimation:function(i,n,o){var a=0,s=o.oA;o.sectors.each(function(t,e){a=o.animationArithmetic(i,0,t.get("totalAngle"),n),t.push("startAngle",s),t.push("endAngle",s+=a),o.is3D()||t.drawSector()}),o.is3D()&&o.proxy.drawSector()},parse:function(i){i.data.each(function(t,e){i.doParse(i,t,e)},i),i.localizer(i)},doParse:function(n,t,e){var i=t.name+" "+n.getPercent(t.value);n.doActing(n,t,null,e,i),n.push("sub_option.id",e),n.get("sub_option.label")&&n.push("sub_option.label.text",i),n.push("sub_option.listeners.changed",function(t,e,i){n.fireEvent(n,e?"bound":"rebound",[n,t.get("name")])}),n.sectors.push(n.doSector(n,t))},doSector:function(t){return new S[t.sub](t.get("sub_option"),t)},dolayout:function(t,e,i,n,o,a){(t.is3D()?S.inEllipse(t.get(t.X)-e,t.topY-i,t.a,t.b):S.distanceP2P(t.get(t.X),t.topY,e,i)<t.r)&&(i=t.topY-i,n.push("labelx",t.get(t.X)+(2*Math.sqrt(t.r*t.r-i*i)+o)*(0==a||3==a?1:-1)),n.localizer(n))},localizer:function(i){if(i.get("intellectLayout")){var n,o,a,s=[],t=[],r=i.get("layout_distance");i.sectors.each(function(t,e){t.isLabel()&&s.push(t.label)}),s.sor(function(t,e){return 0<Math.abs(Math.sin(t.get("angle")))-Math.abs(Math.sin(e.get("angle")))}),s.each(function(e){t.each(function(t){o=t.labelx,a=t.labely,(e.labely<=a&&a-e.labely-1<e.get(i.H)||e.labely>a&&e.labely-a-1<t.get(i.H))&&(e.labelx<=o&&o-e.labelx<e.get(i.W)||e.labelx>o&&e.labelx-o<t.get(i.W))&&(n=e.get("quadrantd"),e.push("labely",e.get("labely")+a-e.labely+(e.get(i.H)+r)*(1<n?-1:1)),e.localizer(e),i.dolayout(i,e.get("labelx"),e.get("labely")+e.get(i.H)/2*(n<2?-1:1),e,r,n))},i),t.push(e)})}},doConfig:function(){S.Pie.superclass.doConfig.call(this);var i,n=this._(),t=n.get("radius"),e=n.get("sub_option.label")?.35:.44,o=2*Math.PI;n.sub=n.is3D()?"Sector3D":"Sector2D",n.sectors.zIndex=n.get("z_index"),n.sectors.length=0,n.oA=S.angle2Radian(n.get("offset_angle"))%o,n.is3D()&&(e+=.06);var a=n.data.length,s=S.angle2Radian(S.between(0,90,n.get("separate_angle"))),r=o-s,l=(s=s/a,n.oA+s),c=l;0==n.total&&(i=1/a),n.data.each(function(t,e){l+=(i||t.value/n.total)*r,e==a-1&&(l=o+n.oA),t.startAngle=c,t.endAngle=l,t.totalAngle=l-c,t.middleAngle=(c+l)/2,c=l+s},n),n.r=t=S.parsePercent(t,Math.floor(n.get("minDistance")*e)),n.topY=n.originXY(n,[t+n.get("l_originx"),n.get("r_originx")-t,n.get("centerx")],[n.get("centery")]).y,S.apply(n.get("sub_option"),S.clone([n.X,n.Y,"bound_event","mutex","increment"],n.options))}}),S.Pie2D=S.extend(S.Pie,{configure:function(){S.Pie2D.superclass.configure.call(this),this.type="pie2d"},doConfig:function(){S.Pie2D.superclass.doConfig.call(this);var t=this._();t.push("sub_option.radius",t.r),t.parse(t)}}),S.register("Pie2D"),S.Pie3D=S.extend(S.Pie,{configure:function(){S.Pie3D.superclass.configure.apply(this,arguments),this.type="pie3d",this.dimension=S._3D,this.set({zRotate:45,yHeight:30}),this.positive=!0},doSector:function(t,e){return t.push("sub_option.cylinder_height",e.cylinder_height?e.cylinder_height*t.get("zRotate_"):t.get("cylinder_height")),new S[t.sub](t.get("sub_option"),t)},one:function(i){var o,e,a,n=[],s=i.get("counterclockwise"),r=function(t,e){return 1+Math.sin(e?t+Math.PI:t)},l="startAngle",c="endAngle";lay=function(t,e,i,n){a=S.quadrantd(e),(!t||0!=a&&3!=a)&&(t||2!=a&&1!=a)||o.push({g:e,z:e==i,x:n.x,y:n.y,a:n.a,b:n.b,color:S.dark(n.get("background_color")),h:n.h,F:n})},i.proxy=new S.Custom({z_index:i.get("z_index")+1,drawFn:function(){this.drawSector(),n=[],i.sectors.each(function(t){t.get("label")&&(t.expanded?n.push(t.label):t.label.draw())}),n.each(function(t){t.draw()})}}),i.proxy.drawSector=function(){i.sectors.each(function(t,e){i.T.ellipse(t.x,t.y+t.h,t.a,t.b,t.get(l),t.get(c),0,t.get("border.enable"),t.get("border.width"),t.get("border.color"),t.get("shadow"),s,!0)},i),o=[],e=[],i.sectors.each(function(t){lay(s,t.get(l),t.get(c),t),lay(!s,t.get(c),t.get(l),t),e=e.concat(S.visible(t.get(l),t.get(c),t))},i),o.sor(function(t,e){var i=r(t.g)-r(e.g);return 0==i?t.z:0<i}),o.each(function(t,e){i.T.sector3D.layerDraw.call(i.T,t.x,t.y,t.a+.5,t.b+.5,s,t.h,t.g,t.color)},i),i.processAnimation||e.sor(function(t,e){return r((t.s+t.e)/2,1)-r((e.s+e.e)/2,1)<0}),e.each(function(t,e){i.T.sector3D.sPaint.call(i.T,t.f.x,t.f.y,t.f.a,t.f.b,t.s,t.e,s,t.f.h,t.f.get("f_color"))},i),i.sectors.each(function(t,e){i.T.ellipse(t.x,t.y,t.a,t.b,t.get(l),t.get(c),t.get("f_color"),t.get("border.enable"),t.get("border.width"),t.get("border.color"),!1,!1,!0)},i)},i.one=S.emptyFn},doConfig:function(){S.Pie3D.superclass.doConfig.call(this);var t=this._(),e=S.angle2Radian(t.get("zRotate"));t.push("cylinder_height",t.get("yHeight")*t.push("zRotate_",Math.abs(Math.cos(e)))),t.a=t.push("sub_option.semi_major_axis",t.r),t.b=t.push("sub_option.semi_minor_axis",t.r*Math.abs(Math.sin(e))),t.topY=t.push("sub_option.originy",t.get(t.Y)-t.get("yHeight")/2),t.parse(t),t.one(t),t.components.push(t.proxy)}}),S.register("Pie3D"),S.Donut2D=S.extend(S.Pie,{configure:function(){S.Donut2D.superclass.configure.call(this),this.type="donut2d",this.set({donutwidth:.3,center:{text:"",line_height:24,fontweight:"bold",fontsize:24}})},doConfig:function(){S.Donut2D.superclass.doConfig.call(this);var t=this._(),e="donutwidth",i=t.r;t.push("sub_option.radius",i),0<t.get(e)&&(t.get(e)<1?t.push(e,Math.floor(i*t.get(e))):t.get(e)>=i&&t.push(e,0),t.push("sub_option.donutwidth",t.get(e))),S.isString(t.get("center"))&&t.push("center",S.applyIf({text:t.get("center")},t.default_.center)),""!=t.get("center.text")&&(t.push("center.originx",t.get(t.X)),t.push("center.originy",t.get(t.Y)),t.push("center.textBaseline","middle"),t.center=new S.Text(t.get("center"),t),t.components.push(t.center)),t.parse(t)}}),S.register("Donut2D"),S.Column=S.extend(S.Chart,{configure:function(t){S.Column.superclass.configure.call(this),this.type="column",this.set({coordinate:{},column_width:void 0,column_space:void 0,text_space:6,scaleAlign:"left",sub_option:{},label:{}}),this.registerEvent(),this.rectangles=[],this.labels=[],this.components.push(this.labels),this.components.push(this.rectangles)},doAnimation:function(e,i,n){var o;n.labels.each(function(t){t.draw()}),n.rectangles.each(function(t){o=Math.ceil(n.animationArithmetic(e,0,t.height,i)),t.push(n.Y,t.y+(t.height-o)),t.push(n.H,o),t.drawRectangle()})},getCoordinate:function(){return this.coo},doLabel:function(t,e,i,n,o){t.labels.push(new S.Text(S.apply(t.get("label"),{id:e,text:i,originx:n,originy:o}),t))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){var e=t.get("column_width"),i=t.get("column_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_height,a=e/2,s=e*(t.get("group_fator")||0),r="complex"!=t.dataType?e+i:t.data.length*e+i+(t.is3D()?(t.data.length-1)*s:0),l=t.coo.get("y_end"),c=l-n.basic*o-(t.is3D()?t.get("zHeight")*(t.get("bottom_scale")-1)/2*t.get("yAngle_"):0),u=i+t.coo.get("x_start");l=l+t.get("text_space")+t.coo.get("axis.width")[2],t.doEngine(t,e,i,n,o,a,s,r,u,c,l)},doConfig:function(){S.Column.superclass.doConfig.call(this);var a=this._(),s="column_width",t="z_index";a.sub=a.is3D()?"Rectangle3D":"Rectangle2D",a.rectangles.length=0,a.labels.length=0,a.rectangles.zIndex=a.get(t),a.labels.zIndex=a.get(t)+1,a.coo=S.Coordinate.coordinate_.call(a,function(){var t,e,i,n=a.data.length,o=a.get("coordinate.valid_width_value");"complex"==a.dataType?(n=(i=a.get("labels").length)*n+(a.is3D()?(n-1)*i*a.get("group_fator"):0),t=Math.floor(o/(i+1+n)),e=a.pushIf(s,t),i+=1):("stacked"==a.dataType&&(n=a.get("labels").length),t=Math.floor(2*o/(3*n+1)),e=a.pushIf(s,t),i=n+1),o<e*n&&(e=a.push(s,t)),a.push("column_space",(o-e*n)/i),a.is3D()&&(a.push("zHeight",a.get(s)*a.get("zScale")),a.push("sub_option.zHeight",a.get("zHeight")),a.push("sub_option.xAngle_",a.get("xAngle_")),a.push("sub_option.yAngle_",a.get("yAngle_")))}),a.push("sub_option.width",a.get(s))}}),S.Column2D=S.extend(S.Column,{configure:function(){S.Column2D.superclass.configure.call(this),this.type="column2d"},doEngine:function(i,t,e,n,o,a,s,r,l,c,u){var g;i.data.each(function(t,e){g=(t.value-n.start)*o/n.distance,i.doParse(i,t,e,{id:e,originx:l+e*r,originy:c-(0<g?g:0),height:Math.abs(g)}),i.rectangles.push(new S[i.sub](i.get("sub_option"),i)),i.doLabel(i,e,t.name,l+r*e+a,u)},i)},doConfig:function(){S.Column2D.superclass.doConfig.call(this),this.engine(this)}}),S.register("Column2D"),S.Column3D=S.extend(S.Column2D,{configure:function(){S.Column3D.superclass.configure.call(this),this.type="column3d",this.dimension=S._3D,this.set({coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){S.Column3D.superclass.doConfig.call(this)}}),S.register("Column3D"),S.ColumnMulti2D=S.extend(S.Column,{configure:function(){S.ColumnMulti2D.superclass.configure.call(this),this.type="columnmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(n,o,e,a,s,t,r,l,c,u,g){var h;n.columns.each(function(t,i){t.item.each(function(t,e){h=(t.value-a.start)*s/a.distance,n.doParse(n,t,e,{id:i+"_"+e,originx:c+e*(o+r)+i*l,originy:u-(0<h?h:0),height:Math.abs(h)}),n.rectangles.push(new S[n.sub](n.get("sub_option"),n))},n),n.doLabel(n,i,t.name,c-.5*e+(i+.5)*l,g)},n)},doConfig:function(){S.ColumnMulti2D.superclass.doConfig.call(this),this.engine(this)}}),S.register("ColumnMulti2D"),S.ColumnMulti3D=S.extend(S.ColumnMulti2D,{configure:function(){S.ColumnMulti3D.superclass.configure.call(this),this.type="columnmulti3d",this.dataType="complex",this.dimension=S._3D,this.set({xAngle:60,yAngle:20,zScale:1,group_fator:.3,bottom_scale:1.4})},doConfig:function(){S.ColumnMulti3D.superclass.doConfig.call(this)}}),S.register("ColumnMulti3D"),S.ColumnStacked2D=S.extend(S.Column,{configure:function(){S.ColumnStacked2D.superclass.configure.call(this),this.type="columnstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,t,e,a,s,i,n,r,l,c,u){var g,h,d,p=o.get("percent");o.columns.each(function(i,n){g=0,d=p?100/i.total:1,i.item.each(function(t,e){h=(t.value*d-a.start)*s/a.distance,t.total=i.total,o.doParse(o,t,e,{id:n+"_"+e,originx:l+n*r,originy:c-(0<h?h:0)-g,height:Math.abs(h)}),g+=h,o.rectangles.push(new S[o.sub](o.get("sub_option"),o))},o),o.doLabel(o,n,i.name,l-.5*e+(n+.5)*r,u)},o)},doConfig:function(){S.ColumnStacked2D.superclass.doConfig.call(this),this.engine(this)}}),S.register("ColumnStacked2D"),S.ColumnStacked3D=S.extend(S.ColumnStacked2D,{configure:function(){S.ColumnStacked3D.superclass.configure.call(this),this.type="columnstacked3d",this.dataType="stacked",this.dimension=S._3D,this.set({percent:!1,sub_option:{label:{color:"#ffffff"},valueAlign:"middle"},coordinate:{},xAngle:60,yAngle:20,zScale:1,bottom_scale:1.4})},doConfig:function(){S.ColumnStacked3D.superclass.doConfig.call(this)}}),S.register("ColumnStacked3D"),S.Bar=S.extend(S.Chart,{configure:function(){S.Bar.superclass.configure.call(this),this.type="bar",this.set({coordinate:{striped_direction:"h"},bar_height:void 0,bar_space:void 0,text_space:6,scaleAlign:"bottom",sub_option:{},label:{}})},getCoordinate:function(){return this.coo},doLabel:function(t,e,i,n,o){t.labels.push(new S.Text(S.apply(t.get("label"),{id:e,text:i,textAlign:"right",textBaseline:"middle",originx:n,originy:o}),t))},doParse:function(t,e,i,n){t.doActing(t,e,n,i)},engine:function(t){var e=t.get("bar_height"),i=t.get("bar_space"),n=t.coo.getScale(t.get("scaleAlign")),o=t.coo.valid_width,a=e/2,s="complex"!=t.dataType?e+i:t.data.length*e+i,r=t.coo.get("x_start")+n.basic*o,l=t.coo.get(t.X)-t.get("text_space")-t.coo.get("axis.width")[3],c=t.coo.get("y_start")+i;t.doEngine(t,e,i,n,o,a,s,r,l,c)},doAnimation:function(e,i,n){n.labels.each(function(t){t.draw()}),n.rectangles.each(function(t){t.push(n.W,Math.ceil(n.animationArithmetic(e,0,t.width,i))),t.drawRectangle()})},doConfig:function(){S.Bar.superclass.doConfig.call(this);var a=this._(),s="bar_height",t="z_index";a.rectangles=[],a.labels=[],a.rectangles.zIndex=a.get(t),a.labels.zIndex=a.get(t)+1,a.components.push(a.labels),a.components.push(a.rectangles),a.coo=S.Coordinate.coordinate_.call(a,function(){var t,e,i,n=a.data.length,o=a.get("coordinate.valid_height_value");"complex"==a.dataType?(n=(i=a.get("labels").length)*n+(a.is3D()?(n-1)*i*a.get("group_fator"):0),t=Math.floor(o/(i+1+n)),e=a.pushIf(s,t),i+=1):("stacked"==a.dataType&&(n=a.get("labels").length),t=Math.floor(2*o/(3*n+1)),e=a.pushIf(s,t),i=n+1),o<e*n&&(e=a.push(s,t)),a.push("bar_space",(o-e*n)/i)}),a.push("sub_option.height",a.get(s)),a.push("sub_option.valueAlign",a.R),a.push("sub_option.tipAlign",a.R)}}),S.Bar2D=S.extend(S.Bar,{configure:function(){S.Bar2D.superclass.configure.call(this),this.type="bar2d"},doEngine:function(i,t,e,n,o,a,s,r,l,c){var u;i.data.each(function(t,e){u=(t.value-n.start)*o/n.distance,i.doParse(i,t,e,{id:e,originy:c+e*s,width:Math.abs(u),originx:r+(0<u?0:-Math.abs(u))}),i.rectangles.push(new S.Rectangle2D(i.get("sub_option"),i)),i.doLabel(i,e,t.name,l,c+e*s+a)},i)},doConfig:function(){S.Bar2D.superclass.doConfig.call(this),this.engine(this)}}),S.register("Bar2D"),S.BarMulti2D=S.extend(S.Bar,{configure:function(){S.BarMulti2D.superclass.configure.call(this),this.type="barmulti2d",this.dataType="complex",this.set({labels:[]})},doEngine:function(n,o,e,a,s,t,r,l,c,u){var g;n.columns.each(function(t,i){t.item.each(function(t,e){g=(t.value-a.start)*s/a.distance,n.doParse(n,t,e,{id:i+"_"+e,originy:u+e*o+i*r,width:Math.abs(g),originx:l+(0<g?0:-Math.abs(g))}),n.rectangles.push(new S.Rectangle2D(n.get("sub_option"),n))},n),n.doLabel(n,i,t.name,c,u-.5*e+(i+.5)*r)},n)},doConfig:function(){S.BarMulti2D.superclass.doConfig.call(this),this.engine(this)}}),S.register("BarMulti2D"),S.BarStacked2D=S.extend(S.Bar,{configure:function(){S.BarStacked2D.superclass.configure.call(this),this.type="barstacked2d",this.dataType="stacked",this.set({percent:!1,labels:[],sub_option:{label:{color:"#ffffff"},valueAlign:"middle"}})},doEngine:function(o,t,e,a,s,i,r,l,c,u){var g,h,d,p=o.get("percent");o.columns.each(function(i,n){g=0,d=p?100/i.total:1,i.item.each(function(t,e){h=(t.value*d-a.start)*s/a.distance,t.total=i.total,o.doParse(o,t,e,{id:n+"_"+e,originy:u+n*r,originx:l+(0<h?0:-Math.abs(h))+g,width:Math.abs(h)}),g+=h,o.rectangles.push(new S.Rectangle2D(o.get("sub_option"),o))},o),o.doLabel(o,n,i.name,c,u-.5*e+(n+.5)*r)},o)},doConfig:function(){S.BarStacked2D.superclass.doConfig.call(this),this.push("sub_option.valueAlign",this.C),this.engine(this)}}),S.register("BarStacked2D"),S.LineSegment=S.extend(S.Component,{configure:function(){S.LineSegment.superclass.configure.apply(this,arguments),this.type="linesegment",this.set({brushsize:1,intersection:!0,label:{},sign:"round",area_color:null,hollow:!0,hollow_inside:!0,hollow_color:"#FEFEFE",smooth:!1,smoothing:1.5,point_size:6,points:[],keep_with_coordinate:!1,shadow_blur:1,shadow_offsety:1,point_space:0,coordinate:null,event_range_x:0,limit_y:!1,tip_offset:2,event_range_y:0}),this.registerEvent("parseText"),this.tip=null},drawSegment:function(){var e=this._();e.polygons.each(function(t){e.T.polygon.apply(e.T,t)}),e.T.shadowOn(e.get("shadow")),e.lines.each(function(t){e.T.lineArray.apply(e.T,t)}),e.intersections.each(function(t){e.sign_plugin?e.sign_plugin_fn.apply(e,t):e.T.round0.apply(e.T,t)}),e.get("shadow")&&e.T.shadowOff()},doDraw:function(t){t.drawSegment(),t.get("label")&&t.labels.each(function(t){t.draw()})},isEventValid:function(){},tipInvoke:function(){var a=this.x,s=(this.y,this.get("tip_offset")),r=this.get("point_size")+s,l=this;return function(t,e,i){var n=i.left,o=i.top;return{left:n=l.tipPosition<3&&0<n-t-a-s||2<l.tipPosition&&n-t-a-s<0?n-(t+s):n+s,top:o=l.tipPosition%2==0?o+r:o-e-r}}},PP:function(t,e,i,n,o,a){t.get("area")&&t.polygons.push([t.get("area_color")||t.get("light_color2"),0,t.get("brushsize"),0,0,t.get("area_opacity"),t.get("smooth")?e:[{x:i,y:n}].concat(e.concat([{x:o,y:a}])),t.get("smooth"),t.get("smoothing")||1.5,[{x:i,y:n},{x:o,y:a}]])},parse:function(e){e.polygons=[],e.lines=[],e.intersections=[],e.labels=[];var t=e.get("points"),i=e.get("intersection"),n=!!e.get("label"),o=[],a=!1,s=e.get("smooth"),r=e.get("smoothing")||1.5,l=e.get("f_color"),c=e.get("brushsize"),u=e.get("point_size");if(i){var g=e.getPlugin("sign"),h=l,d=e.get("hollow_color");e.sign_plugin=S.isFunction(g),e.sign_plugin_fn=g,e.get("hollow_inside")&&(h=d,d=l)}t.each(function(t){t.x_=t.x,t.y_=t.y,!t.ignored&&n&&(e.push("label.originx",t.x),e.push("label.originy",t.y-u/2-1),e.push("label.text",e.fireString(e,"parseText",[e,t.value],t.value)),S.applyIf(e.get("label"),{textBaseline:"bottom",color:e.get("f_color")}),e.labels.push(new S.Text(e.get("label"),e))),t.ignored&&a?(e.lines.push([o,c,l,s,r]),e.PP(e,o,o[0].x,e.y,o[o.length-1].x,e.y),a=!(o=[])):t.ignored||(o.push(t),a=!0),i&&!t.ignored&&e.intersections.push(e.sign_plugin?[e.T,e.get("sign"),t,u,t.color||h,t.hollow_color||d]:e.get("hollow")?[t,u/2-c+1,t.color||h,c+1,t.hollow_color||d]:[t,u/2,t.color||h])}),o.length&&(e.lines.push([o,c,l,s,r]),e.PP(e,o,o[0].x,e.y,o[o.length-1].x,e.y))},doConfig:function(){S.LineSegment.superclass.doConfig.call(this),S.Assert.isTrue(0<this.get("point_space"),"point_space");var n=this._(),t=3*n.get("point_size")/2,o=n.get("point_space"),a=n.get("event_range_y"),s=n.get("event_range_x"),r=n.get("tipInvokeHeap"),l=n.get("points"),e=n.get("name");n.parse(n),(s<=0||o/2<s)&&(s=n.push("event_range_x",o/2)),0==a&&(a=n.push("event_range_y",t/2)),n.get("tip.enable")&&(n.on("mouseover",function(t,e,i){r.push(n),n.tipPosition=r.length}).on("mouseout",function(t,e,i){r.pop()}),n.push("tip.invokeOffsetDynamic",!0),n.tip=new S.Tip(n.get("tip"),n));var c=n.get("coordinate"),u=n.get("limit_y"),g=n.get("keep_with_coordinate"),h=function(t,e,i){return!(t.ignored||!(Math.abs(e-t.x)<s)||u&&!(u&&Math.abs(i-t.y)<a))},d=function(t){return{valid:!0,name:e,value:l[t].value,text:l[t].text,top:l[t].y,left:l[t].x,i:t,hit:!0}};n.isEventValid=function(t){if(c&&!c.isEventValid(t,c).valid)return{valid:!1};var e=Math.floor((t.x-n.x)/o);if(e<0||e>=l.length-1)return e=S.between(0,l.length-1,e),h(l[e],t.x,t.y)?d(e):{valid:g};for(var i=e;i<=e+1;i++)if(h(l[i],t.x,t.y))return d(i);return{valid:g}}}}),S.Line=S.extend(S.Chart,{configure:function(){S.Line.superclass.configure.call(this),this.type="line",this.set({brushsize:1,coordinate:{axis:{width:[0,0,2,2]}},crosshair:{enable:!1},tipMocker:null,tipMockerOffset:null,scaleAlign:"left",labelAlign:"bottom",labels:[],label_space:6,proportional_spacing:!0,sub_option:{},legend:{sign:"bar"},label:{}}),this.registerEvent("parsePoint"),this.lines=[],this.components.push(this.lines)},getCoordinate:function(){return this.coo},doConfig:function(){S.Line.superclass.doConfig.call(this);var n=this._(),t=1==n.data.length;n.lines.length=0,n.lines.zIndex=n.get("z_index");var o=n.pushIf("sub_option.keep_with_coordinate",t);n.get("crosshair.enable")&&(n.pushIf("crosshair.hcross",t),n.push("crosshair.invokeOffset",function(t,e){var i=n.lines[0].isEventValid(t);return i.valid?i:o})),n.Combination||(n.push("coordinate.crosshair",n.get("crosshair")),n.pushIf("coordinate.scale",[{position:n.get("scaleAlign"),max_scale:n.get("maxValue")},{position:n.get("labelAlign"),start_scale:1,scale:1,end_scale:n.get("maxItemSize"),labels:n.get("labels"),label:n.get("label")}])),n.coo=S.Coordinate.coordinate_.call(n),n.Combination&&(n.coo.push("crosshair",n.get("crosshair")),n.coo.doCrosshair(n.coo));var e=n.coo.valid_width,i=e,a=n.get("maxItemSize")-1,s=e/a,r=n.get("point_space");if(n.get("proportional_spacing")&&(r&&r<s?i=a*r:n.push("point_space",s)),n.push("sub_option.width",i),n.push("sub_option.height",n.coo.valid_height),n.push("sub_option.originx",n.coo.get("x_start")+(e-i)/2),n.push("sub_option.originy",n.coo.get("y_end")),n.get("tip.enable")&&!n.mocker&&S.isFunction(n.get("tipMocker"))){n.push("sub_option.tip.enable",!1),n.push("tip.invokeOffsetDynamic",!0);var l,c,u,g,h=n.coo.get(n.X),d=n.coo.get(n.Y),p=n.coo.height,f=n.get("tipMockerOffset");f=S.isNumber(f)?f<0?0:1<f?1:f:null,n.push("tip.invokeOffset",function(t,e,i){return null!=f?i.top=d+(p-e)*f:(i.top=i.maxTop-(i.maxTop-i.minTop)/3-e,(p<e||d>i.top)&&(i.top=d)),{left:5<i.left-t-h?i.left-t-5:i.left+5,top:i.top}});var y=n.get("tip.listeners.parseText");y&&delete n.get("tip.listeners").parseText,n.mocker=new S.Custom({eventValid:function(i){return(u=n.lines[0].isEventValid(i)).hit=c!=u.i,u.valid&&(c=u.i,l=[],n.lines.each(function(t,e){g=t.isEventValid(i),0==e?u.minTop=u.maxTop=g.top:(u.minTop=Math.min(u.minTop,g.top),u.maxTop=Math.max(u.maxTop,g.top)),l.push(y?y(null,g.name,g.value,g.text,g.i):g.name+" "+g.value)}),u.text=n.get("tipMocker").call(n,l,u.i)||"tipMocker not return"),!!u.valid&&u}}),new S.Tip(n.get("tip"),n.mocker),n.register(n.mocker)}n.pushIf("sub_option.area_opacity",n.get("area_opacity"))}}),S.LineBasic2D=S.extend(S.Line,{configure:function(){S.LineBasic2D.superclass.configure.call(this),this.type="basicline2d",this.tipInvokeHeap=[]},doAnimation:function(i,n,o){o.lines.each(function(e){e.get("points").each(function(t){t.y=e.y-Math.ceil(o.animationArithmetic(i,0,e.y-t.y_,n))}),e.drawSegment()})},doConfig:function(){S.LineBasic2D.superclass.doConfig.call(this);var n,o,a,s,r,l,c=this._(),u=c.coo.valid_height,g=c.get("point_space"),h=c.get("sub_option.originx");c.push("sub_option.tip.showType","follow"),c.push("sub_option.coordinate",c.coo),c.push("sub_option.tipInvokeHeap",c.tipInvokeHeap),c.push("sub_option.point_space",g),c.data.each(function(i,t){n=c.coo.getScale(i.scaleAlign||c.get("scaleAlign")),r=c.get("sub_option.originy")-n.basic*u,o=[],i.value.each(function(t,e){a=g*e,s=(t-n.start)*u/n.distance,l={x:h+a,y:r-s,value:t,text:i.name+" "+t},S.merge(l,c.fireEvent(c,"parsePoint",[i,t,a,s,e,n])),o.push(l)},c),S.merge(c.get("sub_option"),i),c.push("sub_option.points",o),c.push("sub_option.brushsize",i.linewidth||i.line_width),c.lines.push(new S.LineSegment(c.get("sub_option"),c))},this)}}),S.register("LineBasic2D"),S.Area2D=S.extend(S.LineBasic2D,{configure:function(){S.Area2D.superclass.configure.call(this),this.type="area2d",this.set({area_opacity:.3})},doConfig:function(){this.push("sub_option.area",!0),S.Area2D.superclass.doConfig.call(this)}}),S.register("Area2D")}(iChart);